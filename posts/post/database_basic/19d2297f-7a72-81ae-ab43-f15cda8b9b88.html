<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="preload" href="/horizon-atlas/_next/static/css/58898da9f9308ef7.css" as="style"/><link rel="stylesheet" href="/horizon-atlas/_next/static/css/58898da9f9308ef7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/horizon-atlas/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/horizon-atlas/_next/static/chunks/webpack-d6b9fb8b967c62fc.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/framework-a6b3d2fb26bce5d1.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/main-17de9138735c079b.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/pages/_app-c445dfc71857f30d.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/019d026b-098b74cb779c3b0d.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/68c0a17d-759a94d8aecfc687.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/ebc70433-16563bb998e29884.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/257e8032-4f94a427f00c1f50.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/481-b237c0ba77969f95.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/758-90058e5b4532a338.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/531-f1d1618aec78f1c2.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/855-c8386eba9e114daf.js" defer=""></script><script src="/horizon-atlas/_next/static/chunks/pages/posts/post/%5Bslug%5D/%5B...childId%5D-803af3afd2bd7897.js" defer=""></script><script src="/horizon-atlas/_next/static/-s9v652TZelvFO3fKFhvV/_buildManifest.js" defer=""></script><script src="/horizon-atlas/_next/static/-s9v652TZelvFO3fKFhvV/_ssgManifest.js" defer=""></script></head><body class="antialiased"><div id="__next"><div class="fixed inset-0 flex justify-center items-center bg-black bg-opacity-50"><div class="bg-white p-6 rounded-lg shadow-lg w-96"><h2 class="text-xl font-bold mb-4">ログインが必要です</h2><button class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">OK</button></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"mdBlocks":[{"type":"paragraph","blockId":"19d2297f-7a72-8132-8c4f-db436e40f85f","parent":"今回はpythonとそのライブラリであるsqlite3を使用して、データベースのデータを取得する方法を紹介します。","children":[]},{"type":"heading_2","blockId":"19d2297f-7a72-81b1-a92a-d43e92e9a61a","parent":"## データの取得方法","children":[]},{"type":"divider","blockId":"19d2297f-7a72-81a2-bdae-e4efee9d2027","parent":"---","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8140-b6e3-f2372ee0b9f2","parent":"データを取得する方法を見ていきましょう。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-81af-badb-d2b43a76e6e8","parent":"\u003e データを取得するSQL文  \n\u003e ```sql  \n\u003e SELECT カラム名 FROM テーブル名  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-8109-bc40-c955b6478568","parent":"```sql\nSELECT カラム名 FROM テーブル名\n```","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-81bb-9c32-df0dbf3a14ed","parent":"これで指定したテーブルの中のカラムを取得できます。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8110-846f-d005002bea6a","parent":"テーブル内のすべてのデータを取得したい場合はカラム名に`*`を指定します。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-812f-b555-df07b92f2132","parent":"\u003e テーブル内のすべてのデータを取得する  \n\u003e ```sql  \n\u003e SELECT * FROM テーブル名  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-81ac-87d0-ea8ab0c9e04d","parent":"```sql\nSELECT * FROM テーブル名\n```","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-81e3-b42a-fc71e7379cf4","parent":"取得するデータの条件を指定するには、`WHERE` 句をつけます。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-816f-bf6a-f1de925503b4","parent":"\u003e 取り出すデータに条件を指定する  \n\u003e ```sql  \n\u003e SELECT カラム名 FROM テーブル名 WHERE 条件  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-819e-bdb7-c64f081294df","parent":"```sql\nSELECT カラム名 FROM テーブル名 WHERE 条件\n```","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-8158-8a9e-c38c03df3455","parent":"条件をつけることでどの行のデータを取得するかを指定できます。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-818b-b789-ca201c9f12dc","parent":"条件には、「idが何か」を指定することが多いです。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8168-8a51-cc2f6a99885d","parent":"例えば、`id`の値が`1`の行のデータを取り出したい場合は以下のように書きます。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-81d7-b836-c2dd559b6975","parent":"\u003e id=1のデータのみを取得する  \n\u003e ```sql  \n\u003e SELECT * FROM テーブル名 WHERE id = 1  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-81e9-adb9-c24e90849cd5","parent":"```sql\nSELECT * FROM テーブル名 WHERE id = 1\n```","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-81a9-b349-fdc7c80c7054","parent":"条件を複数指定する時は、`AND` を使います。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-8199-bc6a-edf9aa7a1317","parent":"\u003e 複数の条件を指定する  \n\u003e ```sql  \n\u003e SELECT カラム名 FROM テーブル名 WHERE 条件1 AND 条件2 AND ...  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-8190-95f3-ebedab7e03e3","parent":"```sql\nSELECT カラム名 FROM テーブル名 WHERE 条件1 AND 条件2 AND ...\n```","children":[]}]},{"type":"heading_2","blockId":"19d2297f-7a72-81d7-a03b-eed6699a6ddc","parent":"## 実際にデータを取得してみよう","children":[]},{"type":"divider","blockId":"19d2297f-7a72-81e0-9900-dfc43230048c","parent":"---","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8154-9c94-cc061548d163","parent":"「[**データの保存(Create)**](/19d2297f7a72819d8eccded1c97afcc0)」で保存したデータを取得してみよう。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-819f-ad23-fb47275528a8","parent":"新たにread.pyを作成してください。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-81c5-b3c0-da70442d8613","parent":"read.pyの内容を以下のようにしてください。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-8181-914f-e51bf9545b97","parent":"\u003e read.py  \n\u003e ```python  \n\u003e import sqlite3  \n\u003e   \n\u003e dbname = 'TEST.db'  \n\u003e conn = sqlite3.connect(dbname)  \n\u003e cur = conn.cursor()  \n\u003e   \n\u003e **# personテーブルデータを全件取得  \n\u003e cur.execute('SELECT * FROM person')  \n\u003e data = cur.fetchall()  \n\u003e print(data)**  \n\u003e   \n\u003e conn.commit()  \n\u003e   \n\u003e cur.close()  \n\u003e conn.close()  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-81c4-9f45-d4f6756ac340","parent":"```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# personテーブルデータを全件取得\ncur.execute('SELECT * FROM person')\ndata = cur.fetchall()\nprint(data)**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-813a-8c55-f5e7c0502257","parent":"このコードを実行してください。\n以下のように出力されればデータの取得に成功です。","children":[]},{"type":"code","blockId":"19d2297f-7a72-8139-875f-e365044c2869","parent":"```bash\n[(1, 'Sato', 15, 'Man')]\n```","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-81b4-8810-eb6974be4179","parent":"コードを見ていきましょう。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-81b6-93cd-de68168044ec","parent":"まず、`cur.execute(’SELECT * FROM person’)` で、`person`テーブルのデータをすべて取得するSQL文を実行します。次に、`fetchall`メソッドで取得したデータを全て変数`data`に代入し、`print`で出力しています。","children":[]},{"type":"heading_2","blockId":"19d2297f-7a72-81db-be80-ef189dd6d9ec","parent":"## 任意のデータを扱う","children":[]},{"type":"divider","blockId":"19d2297f-7a72-8198-901c-f4735b629090","parent":"---","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-819a-9009-e7df3e158fd4","parent":"データの取得をより実用的に扱うには、データを取得するとき、任意の値で条件を指定する必要があります。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8169-b2f9-db05ea232268","parent":"任意の値で条件を指定する方法を見ていきましょう。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-8172-a445-dcf560eba8c6","parent":"\u003e 例：idが任意の値の条件を指定する  \n\u003e ```python  \n\u003e cur.execute('SELECT カラム名 FROM テーブル名 WHERE id = ?',(指定したいidの値))  \n\u003e ```  \n\u003e   \n\u003e 🛑 `cur` = `cursor`オブジェクト","children":[{"type":"code","blockId":"19d2297f-7a72-8131-81ae-e55e244ccc8f","parent":"```python\ncur.execute('SELECT カラム名 FROM テーブル名 WHERE id = ?',(指定したいidの値))\n```","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8195-8427-f8cbe9faf0a5","parent":"🛑 `cur` = `cursor`オブジェクト","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-81c0-a283-fc3e636361a5","parent":"例えば、personテーブルから、任意のidの行のデータを取得するコードは以下のようになります。","children":[]},{"type":"callout","blockId":"19d2297f-7a72-81a9-8de0-d2188e5a2acd","parent":"\u003e personテーブルから、任意のidの行のデータを取得する  \n\u003e ```python  \n\u003e import sqlite3  \n\u003e   \n\u003e dbname = 'TEST.db'  \n\u003e conn = sqlite3.connect(dbname)  \n\u003e cur = conn.cursor()  \n\u003e   \n\u003e **# 任意の値を入れる  \n\u003e target_id = 1  \n\u003e   \n\u003e # personテーブルから任意の行のデータを取得  \n\u003e cur.execute('SELECT * FROM person WHERE id = ?',(target_id,))  \n\u003e data = cur.fetchall()**  \n\u003e   \n\u003e # 取得したデータを出力  \n\u003e print(data)  \n\u003e   \n\u003e conn.commit()  \n\u003e   \n\u003e cur.close()  \n\u003e conn.close()  \n\u003e ```","children":[{"type":"code","blockId":"19d2297f-7a72-810f-8f54-f50bf2efb48d","parent":"```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# 任意の値を入れる\ntarget_id = 1\n\n# personテーブルから任意の行のデータを取得\ncur.execute('SELECT * FROM person WHERE id = ?',(target_id,))\ndata = cur.fetchall()**\n\n# 取得したデータを出力\nprint(data)\n\nconn.commit()\n\ncur.close()\nconn.close()\n```","children":[]}]},{"type":"paragraph","blockId":"19d2297f-7a72-815e-83b2-d72db9c3f071","parent":"このコードだと、`target_id`の値によって、テーブルから取得するデータの行が変わります。","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-8124-8e1c-d437ef5fe615","parent":"","children":[]},{"type":"paragraph","blockId":"19d2297f-7a72-81e2-b8ae-da720cbca459","parent":"次→[**データの編集(Update)**](/19d2297f7a728165b201cd77e1e2d2f2)","children":[]}],"pageNavs":[{"title":"Home","id":"/posts"},{"title":"基礎班カリキュラム","id":"/posts/course/basic"},{"title":"後期","id":"/posts/course/後期"},{"title":"データベース基礎","id":"/posts/post/database_basic"},{"title":"データの取得(Read)","id":"/posts/post/database_basic19d2297f-7a72-81ae-ab43-f15cda8b9b88"}],"parentTitle":"データベース基礎","childNavs":[{"title":"データベースとは","id":"19d2297f-7a72-8167-ac83-da8e0ace31a5","child":true},{"title":"Pythonでデータベースを扱うためのライブラリ","id":"19d2297f-7a72-8190-8632-dfe77e08f562","child":true},{"title":"データベースとの接続とテーブルの作成","id":"19d2297f-7a72-8170-a321-daff5ba9bc0a","child":true},{"title":"データの保存(Create)","id":"19d2297f-7a72-819d-8ecc-ded1c97afcc0","child":true},{"title":"データの取得(Read)","id":"19d2297f-7a72-81ae-ab43-f15cda8b9b88","child":true},{"title":"データの編集(Update)","id":"19d2297f-7a72-8165-b201-cd77e1e2d2f2","child":true},{"title":"データの削除(Delete)","id":"19d2297f-7a72-812f-8685-d8d24d05ae5f","child":true},{"title":"テーブルの編集","id":"19d2297f-7a72-815c-8bd9-df9b6d31f648","child":true},{"title":"CRUD操作を使い回せるようにしよう","id":"19d2297f-7a72-81d5-b81a-d1366e7bafac","child":true},{"title":"マイグレーション","id":"19d2297f-7a72-812d-bffe-f90403d06872","child":true},{"title":"カラムの属性","id":"19d2297f-7a72-81f3-9beb-ccabfee01d8d","child":true},{"title":"SQL文","id":"19d2297f-7a72-812c-9e40-c5b2126f4f3d","child":true}],"slug":"database_basic","allTags":["Python","基礎班","Flet","Git","GitHub","セットアップ","ファイル","フォルダ","VisualStudioCode","VSCode","Canva","Notion","データベース"],"roleData":{"basic":{"id":"1237895516147290153","name":"基礎班"},"develop":{"id":"1237895555422617751","name":"発展班"}}},"__N_SSG":true},"page":"/posts/post/[slug]/[...childId]","query":{"slug":"database_basic","childId":["19d2297f-7a72-81ae-ab43-f15cda8b9b88"]},"buildId":"-s9v652TZelvFO3fKFhvV","assetPrefix":"/horizon-atlas","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>