(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{98:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/progress",function(){return r(4554)}])},6944:(e,t,r)=>{"use strict";r.d(t,{DM:()=>i,O6:()=>a,Yh:()=>l,zY:()=>s});let a={title:"Home",id:"/posts"},s={title:"基礎班カリキュラム",id:"/posts/course/basic"},i={title:"検索",id:"/search"},l={title:"カリキュラム進捗度",id:"/user/progress"}},4554:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var a=r(4848),s=r(6540);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...p}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:c?24*Number(i)/Number(a):i,className:l("lucide",o),...p},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{className:n,...o}=r;return(0,s.createElement)(c,{ref:a,iconNode:t,className:l("lucide-".concat(i(e)),n),...o})});return r.displayName="".concat(e),r},d=o("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),u=o("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),p=o("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=r(1988);let m=async e=>{let t=await fetch("".concat("https://horizon-atlas-railway-production.up.railway.app","/getDrivefile/").concat(e));return await t.json()};async function f(){return(await m("12ke9QhpI0icBvvCfk6Yyn7wKOeclF4_6OGdheopu-V8")).filter(e=>"TRUE"===e.published)}async function x(e,t){return await Promise.all(e.map(async e=>{let r=(await m(e.fileId)).filter(r=>r[e.userName]===t),a=e.curriculums.split("/"),s=r.map(r=>{let s=[];for(let i of a)r[i]!==e.notAchievedText&&r[e.userName]===t?s.push({title:i,achieved:!0}):r[i]===e.notAchievedText&&r[e.userName]===t&&s.push({title:i,achieved:!1});return s}).flat();return 0===s.length&&a.map(e=>{s.push({title:e,achieved:!1})}),{title:e.title,progress:s}}))}async function g(e,t){let r=await Promise.all(e.map(async e=>{let r=Object.keys(e)[0],a=[];return await Promise.all(e[r].map(async e=>{let r=(await m(e.fileId)).find(r=>r[e.userName]===t);a.push({title:e.curriculums,achieved:void 0!=r,order:parseInt(e.order)})})),{title:r,progress:a}})),a=[];for(let e of r){let t=e.progress.sort((e,t)=>e.order-t.order).map(e=>({title:e.title,achieved:e.achieved})),r={title:e.title,progress:t};a.push(r)}return a}async function w(e){let t=await f(),r=t.filter(e=>"summary"===e.type),a=Object.entries(t.filter(e=>"single"===e.type).reduce((e,t)=>(e[t.title]||(e[t.title]=[]),e[t.title].push(t),e),{})).map(e=>{let[t,r]=e;return{[t]:r}}),s=await g(a,e),i=await x(r,e);return s.concat(i)}var y=r(2855),v=r(6944);function N(){let{user:e}=(0,h.WB)(),[t,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(async function(){e&&(l(!0),r(await w(e.name.split("-")[0])),l(!1))})()},[e]),(0,a.jsx)(y.A,{headerProps:{pageNavs:[v.O6,v.Yh]},children:(0,a.jsxs)("div",{className:"min-h-screen text-gray-900 pt-24 px-5",children:[(0,a.jsxs)("div",{className:"text-center mb-10 animate-fadeIn",children:[(0,a.jsxs)("h1",{className:"text-4xl font-extrabold text-neutral-600",children:[null==e?void 0:e.name.split("-")[0],"さんの進捗度"]}),(0,a.jsx)("div",{className:"w-40 mx-auto border-b-4 border-purple-400 mt-4"})]}),i?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(d,{className:"animate-spin text-purple-400",size:48}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"読み込み中..."})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-8",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:shadow-xl transition-shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-500 mb-4",children:e.title}),e.progress.map((e,t)=>(0,a.jsx)(b,{...e},t))]},t))})]})})}let b=e=>{let{title:t,achieved:r}=e;return(0,a.jsx)("div",{className:"mt-3 p-3 rounded-lg ".concat(r?"bg-purple-100 border-l-4 border-purple-500":"bg-gray-100 border-l-4 border-gray-400"," hover:shadow-md transition-shadow"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[r?(0,a.jsx)(u,{className:"text-purple-700",size:24}):(0,a.jsx)(p,{className:"text-gray-500",size:24}),(0,a.jsx)("span",{className:"text-base font-medium text-gray-700",children:t})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[419,687,354,551,958,4,356,855,636,593,792],()=>t(98)),_N_E=e.O()}]);