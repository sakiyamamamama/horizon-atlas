(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{1420:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/curriculums/[curriculumId]/[pageId]",function(){return a(4738)}])},4738:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSG:()=>ee,default:()=>et});var l=a(4848),r=a(6540),i=a(1106),n=a.n(i);let c=[{type:"link",regex:/\[([^\]]+)\]\(([^\)]+)\)/g},{regex:/\*\*(.*?)\*\*/g,type:"bold",remove:/\*\*/g},{regex:/`([^`]+)`/g,type:"code",remove:/`/g},{regex:/__(.*?)__/g,type:"italic",remove:/__/g},{type:"underline",regex:/<u>(.*?)<\/u>/g,remove:/<\/?u>/g}];function s(e){let t=[],a=0,l=!1;for(let{regex:r,type:i,remove:n}of c){let c;for(r.lastIndex=0,l=!1;null!==(c=r.exec(e.text));){l=!0,a<c.index&&t.push({text:e.text.slice(a,c.index),type:[...e.type,"plain"],link:[...e.link]});let s=c[1],o={text:"link"===i?s:s.replace(n,""),type:[...e.type,i],link:"link"===i?[...e.link,c[2]]:[...e.link]};t.push(o),a=r.lastIndex}if(l)break}return l?(a<e.text.length&&t.push({text:e.text.slice(a),type:[...e.type,"plain"],link:[...e.link]}),t.flatMap(e=>s(e))):(t.push({text:e.text,type:[...e.type,"plain"],link:[...e.link]}),t)}function o(e){let t=[];for(let a of e.type)switch(a){case"bold":t.push({fontWeight:700});case"italic":t.push({fontStyle:"italic"});break;case"code":t.push({backgroundColor:"rgb(235, 235, 235)",color:"rgb(244,63,94)",paddingLeft:4,paddingRight:4,borderRadius:4});break;case"underline":t.push({textDecorationLine:"underline"})}return Object.assign({},...t)}function d(e){let{parent:t,mdBlock:a,depth:i,quote:c}=e,[d,u]=(0,r.useState)([]);return((0,r.useEffect)(()=>{u(s({text:t,type:[],link:[]}))},[]),"c"===a.parent)?null:(0,l.jsxs)("div",{className:"mb-0.5 mt-1",id:a.blockId,children:[(0,l.jsx)("p",{children:d.map((e,t)=>{let a=o(e);return 0===e.link.length?(0,l.jsx)("span",{style:a,children:e.text},t):""===e.link[0]?(0,l.jsx)("span",{style:a,children:(0,l.jsx)("span",{className:"text-neutral-500 underline",children:e.text})},t):(0,l.jsx)("span",{style:a,children:(0,l.jsx)(n(),{href:e.link[0],className:"text-neutral-500 underline cursor-pointer hover:text-neutral-800",children:e.text})},t)})}),(!1===c||void 0===c)&&0!==a.children.length&&a.children.map((e,t)=>(0,l.jsx)("div",{children:(0,l.jsx)(Q,{mdBlock:e,depth:i+1})},t))]})}function u(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)([]),n=t.parent.slice(2);return(0,r.useEffect)(()=>{i(s({text:n,type:[],link:[]}))},[]),(0,l.jsx)("div",{id:t.blockId,children:(0,l.jsx)("h1",{className:"mb-1 mt-8 font-bold text-3xl",children:a.map((e,t)=>{let a=o(e);return(0,l.jsx)("span",{style:a,children:e.text},t)})})})}function p(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)([]),n=t.parent.slice(3);return(0,r.useEffect)(()=>{i(s({text:n,type:[],link:[]}))},[]),(0,l.jsx)("div",{id:t.blockId,children:(0,l.jsx)("h2",{className:"mb-1 mt-6 font-bold text-2xl",children:a.map((e,t)=>{let a=o(e);return(0,l.jsx)("span",{style:a,children:e.text},t)})})})}function m(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)([]),n=t.parent.slice(4);return(0,r.useEffect)(()=>{i(s({text:n,type:[],link:[]}))},[]),(0,l.jsx)("div",{id:t.blockId,children:(0,l.jsx)("h3",{className:"my-2 mt-4 font-bold text-xl",children:a.map((e,t)=>{let a=o(e);return(0,l.jsx)("span",{style:a,children:e.text},t)})})})}function h(e){let{mdBlock:t}=e;return(0,l.jsx)("div",{id:t.blockId,children:(0,l.jsx)("div",{className:"border-neutral-300 border-b size-full my-2"})})}var g=a(7725),x=a(2982),y=a(7795),f=a(1583);function j(e){let{mdBlock:t}=e,a=t.parent.split("\n"),i="";for(let e=1;e<a.length-1;e++)(i+=(1===e?"":"\n")+a[e]).match(/\*\*(.*?)\*\*/g)&&(i=i.replace(/\*\*/g,""));let n=a[0].slice(3),[c,s]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),u=async()=>{try{await navigator.clipboard.writeText(i),s(!0),setTimeout(()=>s(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,l.jsxs)("div",{id:t.blockId,className:"mb-2 mt-2 relative",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,l.jsxs)("div",{className:"mb-0",style:{backgroundColor:"rgb(250,250,250)"},children:[(0,l.jsx)("p",{children:(0,l.jsx)("span",{className:"text-neutral-600 text-sm px-3 py-1 rounded",style:{background:"rgb(235, 235, 235)"},children:n})}),(0,l.jsx)("button",{onClick:u,className:"h-5 absolute top-1 right-2 px-2 text-sm rounded transition-opacity duration-200 ".concat(o?"opacity-100":"opacity-0"),children:c?(0,l.jsxs)("span",{className:"text-purple-500 flex",children:["copied ! ",(0,l.jsx)(f.CMH,{size:24})]}):(0,l.jsx)(y.$G0,{size:24,className:"text-neutral-400 hover:text-neutral-500"})})]}),(0,l.jsx)(x.A,{style:g.KQ,language:n,children:String(i).replace(/\n$/,"")})]})}function b(e){let{mdBlock:t,depth:a}=e,r=t.parent.split(" "),i=r.slice(1).join("");return(0,l.jsxs)("div",{className:"my-1.5",id:t.blockId,children:[(0,l.jsxs)("p",{className:"flex",children:[(0,l.jsx)("span",{className:"mr-2",children:r[0]}),(0,l.jsx)(d,{quote:!0,mdBlock:t,parent:i,depth:a+1})]}),t.children.map((e,t)=>(0,l.jsx)("div",{style:{marginLeft:(a+1)*16},children:(0,l.jsx)(Q,{mdBlock:e,depth:a+1})},t))]})}function k(e){let{mdBlock:t,depth:a}=e,r=t.parent.split(" ").slice(1).join("");return(0,l.jsxs)("div",{id:t.blockId,children:[(0,l.jsxs)("p",{className:"my-2 flex",children:[(0,l.jsx)("span",{className:"font-bold mr-1 text-xl",children:"・"}),(0,l.jsx)(d,{quote:!0,parent:r,depth:a+1,mdBlock:t})]}),t.children.map((e,t)=>(0,l.jsx)("div",{style:{marginLeft:(a+1)*16},children:(0,l.jsx)(Q,{mdBlock:e,depth:a+1})},t))]})}function I(e){let{mdBlock:t,depth:a}=e,r=t.parent.split("> ")[1];return t.children.length>0&&r.includes(t.children[0].parent)?(0,l.jsxs)("div",{className:"bg-white p-2 px-3 mb-3 mt-4 border border-neutral-300 rounded",id:t.blockId,children:[(0,l.jsx)(d,{mdBlock:t,quote:!0,parent:r.replaceAll("#",""),depth:a}),t.children.slice(1).map((e,t)=>(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)(Q,{mdBlock:e,depth:a+1})},t))]}):(0,l.jsxs)("div",{className:"bg-white p-2 px-3 mb-3 mt-4 border border-neutral-300 rounded",id:t.blockId,children:[(0,l.jsx)(d,{mdBlock:t,quote:!0,parent:r,depth:a}),t.children.map((e,t)=>(0,l.jsx)(Q,{mdBlock:e,depth:a+1},t))]})}function v(e){let{mdBlock:t,depth:a}=e,r=t.parent.split(" ")[1];return(0,l.jsxs)("div",{className:"my-1 border-l-2 border-neutral-800 pl-3",id:t.blockId,children:[(0,l.jsx)(d,{mdBlock:t,quote:!0,parent:r,depth:a+1}),t.children.map((e,t)=>(0,l.jsx)(Q,{mdBlock:e,depth:a+1},t))]})}var w=a(633),N=a(7037),B=a(9160);function C(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)(null),[n,c]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),{curriculumId:d}=(0,w.A)();return((0,r.useEffect)(()=>{let e=async e=>{let a="/horizon-atlas/notion_data/eachPage/".concat(d,"/image/").concat(t.blockId,".").concat(e);try{(await fetch(a,{method:"HEAD"})).ok&&i(a)}catch(e){console.error("画像の取得に失敗: ".concat(a),e)}};(async()=>{await e("png"),a||(await e("jpg"),a||await e("gif"))})()},[t.blockId]),a)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{id:t.blockId,className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,l.jsx)("img",{height:200,width:200,src:a,alt:"image_block",style:{width:"auto",height:"100%",display:"block",maxHeight:"350px",cursor:"pointer"},onClick:()=>c(!0)}),(0,l.jsx)("button",{onClick:()=>c(!0),className:"absolute top-1 right-1 bg-neutral-800 bg-opacity-60 text-white hover:bg-opacity-100 p-1 rounded-md shadow-md border border-gray-300",style:{backdropFilter:"blur(5px)",opacity:s?"100%":"0%"},children:(0,l.jsx)(N.z0S,{size:17})})]}),n&&(0,l.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",onClick:()=>c(!1),children:[(0,l.jsx)("div",{className:"relative bg-white p-2 rounded-lg",onClick:e=>e.stopPropagation(),children:(0,l.jsx)("div",{className:"overflow-auto",style:{maxWidth:"90vw",maxHeight:"90vh",touchAction:"none"},children:(0,l.jsx)("img",{src:a,alt:"image_block_large",style:{width:"80vw",height:"auto"}})})}),(0,l.jsx)("button",{className:"flex absolute top-5 right-7 text-white rounded-md px-0.5",onClick:()=>c(!1),children:(0,l.jsx)(B.j55,{size:25})})]})]}):null}function _(e){let{mdBlock:t}=e,a=t.parent.split("|\n|").map(e=>e.slice(1,-1));return(0,l.jsx)("div",{className:"overflow-x-auto whitespace-nowrap my-2",id:t.blockId,children:(0,l.jsx)("table",{className:"table-auto border-collapse border border-neutral-300",children:a.map((e,t)=>{let a=e.split(" | ");return(0,l.jsx)("tr",{children:a.map((e,a)=>{if(0===t){let t=s({text:e,type:[],link:[]});return(0,l.jsx)("th",{className:"border border-gray-300 bg-neutral-100 px-4 py-2",children:t.map((e,t)=>{let a=o(e);return(0,l.jsxs)(l.Fragment,{children:["\n"===e.text&&(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:a,children:e.text},t)]})})},a)}if(1===t)return null;{let t=s({text:e,type:[],link:[]});return console.log("md",t),(0,l.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:t.map((e,t)=>{let a=o(e);return(0,l.jsxs)(l.Fragment,{children:["\n"===e.text&&(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:a,children:e.text},t)]})})},a)}})},t)})})})}var S=a(9965),A=a.n(S);function P(e){let{mdBlock:t}=e,a=t.parent.split("## ")[1],r=t.blockId,{curriculumId:i}=(0,w.A)(),c="/posts/curriculums/".concat(i,"/").concat(r);return(0,l.jsx)(n(),{href:c,id:t.blockId,children:(0,l.jsxs)("div",{className:" my-0.5 py-1 px-0.5 hover:bg-neutral-100 cursor-pointer text-neutral-500 underline flex",children:[(0,l.jsx)(A(),{src:"/horizon-atlas/file_icon.svg",alt:"",height:20,width:20,className:"w-5 h-5 m-0 mr-0.5"}),a]})})}function T(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)(),c=t.parent.match(/\((.*?)\)/g),{curriculumId:s}=(0,w.A)();if((0,r.useEffect)(()=>{(async()=>{var e,a;let l=await fetch("/horizon-atlas/notion_data/eachPage/".concat(s,"/ogsData/").concat(t.blockId,".json")),r=await l.json();if(console.log((null===(e=r.favicon)||void 0===e?void 0:e.slice(0,8))==="https://"),(null===(a=r.favicon)||void 0===a?void 0:a.slice(0,8))!=="https://"){let e=r.ogUrl;c&&(e=c[0].slice(1,-1));let t=new URL(e).origin,a=r.favicon;void 0!==a&&"/"!==a[0]&&(a="/"+a);let l=void 0!==r.favicon?t+a:void 0;i({ogTitle:r.ogTitle,ogDescription:r.ogDescription,ogSiteName:r.ogSiteName,ogLocale:r.ogLocale,favicon:l,ogUrl:r.ogUrl,ImageUrl:r.ImageUrl})}else i(r)})()},[]),c)return(0,l.jsx)("div",{className:"my-2 rounded-sm border-2 border-neutral-200 hover:bg-neutral-100",id:t.blockId,children:(0,l.jsx)(n(),{href:a&&a.ogUrl?a.ogUrl:c[0].slice(1,-1),target:"_brank",rel:"noopener noreferrer",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("div",{className:"m-3",children:[(0,l.jsx)("p",{className:"text-neutral-800 line-clamp-1",children:a&&a.ogTitle?a.ogTitle:c[0].slice(1,-1)}),(0,l.jsx)("p",{className:"text-neutral-500 text-sm line-clamp-2",children:a&&a.ogDescription?a.ogDescription:""}),(0,l.jsxs)("div",{className:"flex mb-0 mt-2",children:[a&&void 0!==a.favicon&&(0,l.jsx)("img",{src:a.favicon,className:"w-auto max-h-4 rounded-full m-0 mr-2",alt:"pageIcon"}),(0,l.jsx)("span",{className:"text-neutral-600 text-xs line-clamp-1",children:a&&a.ogUrl?a.ogUrl:c[0].slice(1,-1)})]})]}),a&&void 0!==a.ImageUrl&&void 0!==a.ImageUrl&&(0,l.jsx)("div",{className:"p-0 m-0",style:{lineHeight:0},children:(0,l.jsx)("img",{src:a.ImageUrl,className:"w-96 h-28 rounded-sm lg:w-72",alt:"pageImage"})})]})})})}function E(e){let{mdBlock:t,depth:a}=e,[i,n]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"my-1 border-neutral-800 pl-1.5 bg-neutral-100",id:t.blockId,children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("button",{className:"text-left space-x-1 p-1 rounded-lg hover:bg-neutral-200 transition",onClick:()=>n(!i),children:i?"▼":"▶︎"}),(0,l.jsx)(d,{mdBlock:t,quote:!0,parent:t.parent,depth:a+1})]}),i&&t.children.map((e,t)=>(0,l.jsx)(Q,{mdBlock:e,depth:a+1},t))]})}let D=function(e){let{mdBlock:t}=e,a=t.parent.match(/\((.*?)\)/g),[i,n]=(0,r.useState)(""),[c,s]=(0,r.useState)(""),[o,d]=(0,r.useState)("500px"),u=(0,r.useRef)(null),{curriculumId:p}=(0,w.A)();if((0,r.useEffect)(()=>{(async function(){let e=await fetch("/horizon-atlas/notion_data/eachPage/".concat(p,"/iframeData/").concat(t.blockId,".json")),a=await e.json();n(a.html),s(a.title)})()},[t.blockId]),(0,r.useEffect)(()=>{if(a&&"Flet"===c){let e=e=>{var t;"https://flet-samples.fly.dev"===e.origin&&(null===(t=e.data)||void 0===t?void 0:t.height)&&d("".concat(e.data.height,"px"))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}},[c]),a&&"Flet"===c){let e=a[0].slice(1,-1);return(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mx-1.5 my-1.5",id:t.blockId,children:(0,l.jsx)("iframe",{src:e,ref:u,style:{width:"100%",height:o,border:"none",overflow:"hidden"},allowFullScreen:!0})})}return console.log("html",i),(0,l.jsx)("div",{className:"mx-1.5 my-1.5",id:t.blockId,children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})})};var O=a(7836);let z=O.env.SUPABASE_ANON_KEY,L=O.env.SUPABASE_URL;class U{}U.getAllCurriculum=async()=>{let e=await fetch("".concat(L,"/functions/v1/get_curriculum"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z)}});return await e.json()},U.getAllTags=async()=>{let e=await fetch("".concat(L,"/functions/v1/getAllTags"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z)}});return await e.json()},U.getAllCategories=async()=>{let e=await fetch("".concat(L,"/functions/v1/getAllCategories"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z)}});return await e.json()},U.getCurriculumByCategory=async e=>{let t=await fetch("".concat(L,"/functions/v1/getCarriculumByCategory"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z)},body:JSON.stringify({category:e})});return await t.json()},U.getBasicCurriculum=async()=>{let e=await fetch("".concat(L,"/functions/v1/getBasicCurriculum"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z)}});return await e.json()},U.getCurriculumByCondition=async(e,t)=>{let a=await fetch("".concat(L,"/functions/v1/getCurriculumWithSelect"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(z)},body:JSON.stringify({match:t,select:e})});return await a.json()};let J=e=>({title:e.title,curriculumId:e.curriculumId,category:e.category,visibility:JSON.parse(e.visibility),tags:JSON.parse(e.tag),is_basic_curriculum:JSON.parse(e.is_basic_curriculum),id:"".concat(e.id)});class F{}F.getAllCurriculum=async()=>{let e=[];for(let t of(await U.getAllCurriculum())){let a=J(t);e.push(a)}return e.sort((e,t)=>parseInt(e.id)-parseInt(t.id))},F.getAllTags=async()=>{let e=await U.getAllTags(),t=[];for(let a of e)for(let e of(await JSON.parse(a.tag)))t.push(e);return Array.from(new Set(t))},F.getAllCategories=async()=>{let e=await U.getAllCategories(),t=[];for(let a of e)t.push(a.category);return Array.from(new Set(t))},F.getCurriculumByCategory=async e=>{let t=await U.getCurriculumByCategory(e),a=[];for(let e of t){let t=J(e);a.push(t)}return a.sort((e,t)=>parseInt(e.id)-parseInt(t.id))},F.getBasicCurriculum=async()=>{let e=await U.getBasicCurriculum(),t=[];for(let a of e){let e=J(a);t.push(e)}return t.sort((e,t)=>parseInt(e.id)-parseInt(t.id))},F.getIdAndTitle=async()=>await U.getCurriculumByCondition("curriculumId,title"),F.getAllCurriculumId=async()=>{let e=await U.getCurriculumByCondition("curriculumId"),t=[];for(let a of e)t.push(a.curriculumId);return t},F.getCurriculumById=async e=>{let t=await U.getCurriculumByCondition("*",{curriculumId:e}),a=[];for(let e of t)a.push(J(e));return a[0]};var H=a(7836);let M=H.env.SUPABASE_ANON_KEY,W=H.env.SUPABASE_URL;class q{}async function R(e){for(let t of[...e.matchAll(/\[([^\]]+)\]\(([^)]+)\)/g)]){let[a,l,r]=t,i=r;if(r.startsWith("https://")||r.startsWith("http://"))i=r;else{let e=await G(r.slice(1));i=""===e.pageId?"":"/posts/curriculums/".concat(e.curriculumId,"/").concat(e.pageId)}e=e.replace(a,"[".concat(l,"](").concat(i,")"))}return e}q.getPageDataByPageId=async e=>{let t=await fetch("".concat(W,"/functions/v1/getPageDataByPageId"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(M)},body:JSON.stringify({pageId:e})});return(await t.json()).sort((e,t)=>e.order-t.order)},q.getPageDataByType=async e=>{let t=await fetch("".concat(W,"/functions/v1/getPageDataByType"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(M)},body:JSON.stringify({type:e})});return await t.json()},q.getPageDataByConditions=async(e,t)=>{let a=await fetch("".concat(W,"/functions/v1/getPageDataWithSelect"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(M)},body:JSON.stringify({match:t,select:e})});return await a.json()};class Y{}async function G(e){for(let t of(await F.getIdAndTitle())){if(e===t.curriculumId||e===t.curriculumId.replaceAll("-",""))return{pageId:t.curriculumId,title:t.title,curriculumId:t.curriculumId};for(let a of(await Y.getBlockIdAndDataByCurriculumId(t.curriculumId)))if(a.blockId===e||e===a.blockId.replaceAll("-",""))return{pageId:a.blockId,title:a.data.slice(2),curriculumId:t.curriculumId}}return{pageId:"",title:"",curriculumId:""}}function K(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)(""),[c,s]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async function(){let e=t.parent.match(/\((.*?)\)/g);if(e){let t=e[0].slice(1,-1),a=await G(t);i("/posts/curriculums/".concat(a.curriculumId,"/").concat(a.pageId)),s(a.title)}})()},[]),(0,l.jsx)("div",{className:"my-2",id:t.blockId,children:(0,l.jsx)(n(),{href:a,className:"text-neutral-500 underline hover:text-neutral-600",children:c})})}Y.getPageDataByPageId=async e=>{let t=function e(t,a){return t.filter(e=>e.parentId===a).map(a=>({blockId:a.blockId,type:a.type,parent:a.data,children:e(t,a.blockId)}))}(await q.getPageDataByPageId(e),e);return await Promise.all(t.map(async e=>{if("paragraph"===e.type){let t=await R(e.parent);return{type:e.type,blockId:e.blockId,parent:t,children:e.children}}if("table_of_contents"===e.type){let a=JSON.stringify({headingList:function(e){let t=[];for(let a of e)"heading_1"===a.type?t.push({type:1,parent:a.parent,blockId:a.blockId}):"heading_2"===a.type?t.push({type:2,parent:a.parent,blockId:a.blockId}):"heading_3"===a.type&&t.push({type:3,parent:a.parent,blockId:a.blockId});return t}(t)});return{type:e.type,blockId:e.blockId,parent:a,children:e.children}}return e}))},Y.getPageDataByType=async e=>await q.getPageDataByType(e),Y.getChildPageIds=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"child_page";return(await q.getPageDataByConditions("curriculumId,blockId",{type:e})).map(e=>({curriculumId:e.curriculumId,pageId:e.blockId}))},Y.getBlockIdAndDataByCurriculumId=async e=>await q.getPageDataByConditions("blockId,data",{curriculumId:e}),Y.getPageDataByTypeAndCurriculumId=async(e,t)=>await q.getPageDataByConditions("blockId,data,order",{type:e,curriculumId:t}),Y.getChildrenData=async e=>{let t=await q.getPageDataByConditions("pageId,curriculumId",{blockId:e,type:"child_page"}),a=await q.getPageDataByConditions("data,blockId",{type:"child_page",pageId:t[0].pageId});return{title:t[0].pageId===t[0].curriculumId?(await U.getCurriculumByCondition("title",{curriculumId:t[0].curriculumId}))[0].title:(await q.getPageDataByConditions("data",{blockId:t[0].pageId}))[0].data.slice(3),childPages:a.map(e=>({title:e.data.slice(3),id:e.blockId}))}},Y.getPageNavs=async e=>{let t=(await q.getPageDataByConditions("curriculumId",{blockId:e}))[0].curriculumId;if(t===e)return[];let a=e,l=[];for(;a!==t;){let e=await q.getPageDataByConditions("pageId,blockId,data",{blockId:a});l.push({id:"/posts/curriculums/".concat(t,"/").concat(e[0].blockId),title:e[0].data.slice(3)}),a=e[0].pageId}return l},Y.getPageTitle=async e=>(await q.getPageDataByConditions("data",{blockId:e}))[0].data.slice(3);let X=function(e){let{mdBlock:t}=e,[a,i]=(0,r.useState)([]);(0,r.useEffect)(()=>{i(JSON.parse(t.parent).headingList)},[]);let n=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})};return(0,l.jsx)("div",{id:t.blockId,className:"w-full",children:a.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>n(e.blockId),className:"mt-0.5 w-full py-1 rounded-md cursor-pointer hover:bg-neutral-100",children:[1===e.type&&(0,l.jsx)("p",{className:"ml-0.5 text-neutral-500 underline",children:e.parent.slice(2)}),2===e.type&&(0,l.jsx)("p",{className:"ml-5 mt-1 text-neutral-500 underline",children:e.parent.slice(3)}),3===e.type&&(0,l.jsx)("p",{className:"ml-8 text-neutral-500 underline",children:e.parent.slice(4)})]},t))})},$=function(e){let{mdBlock:t,depth:a}=e,r=t.children;return(0,l.jsx)("div",{className:"md:flex",id:t.blockId,children:r.map((e,t)=>(0,l.jsx)("div",{className:"md:flex-1 md:px-2",children:e.children.map((e,t)=>(0,l.jsx)(Q,{mdBlock:e,depth:a},t))},t))})};function Q(e){let{mdBlock:t,depth:a}=e;if("paragraph"===t.type)return(0,l.jsx)(d,{parent:t.parent,mdBlock:t,depth:a});if("heading_1"===t.type)return(0,l.jsx)(u,{mdBlock:t,depth:a});if("heading_2"===t.type)return(0,l.jsx)(p,{mdBlock:t,depth:a});if("heading_3"===t.type)return(0,l.jsx)(m,{mdBlock:t,depth:a});if("divider"===t.type)return(0,l.jsx)(h,{mdBlock:t});if("code"===t.type)return(0,l.jsx)(j,{mdBlock:t,depth:a});if("numbered_list_item"===t.type)return(0,l.jsx)(b,{mdBlock:t,depth:a});else if("bulleted_list_item"===t.type)return(0,l.jsx)(k,{mdBlock:t,depth:a});else if("callout"===t.type)return(0,l.jsx)(I,{mdBlock:t,depth:a});else if("quote"===t.type)return(0,l.jsx)(v,{mdBlock:t,depth:a});else if("image"===t.type)return(0,l.jsx)(C,{mdBlock:t,depth:a});else if("table"===t.type)return(0,l.jsx)(_,{mdBlock:t});else if("child_page"===t.type)return(0,l.jsx)(P,{mdBlock:t});else if("bookmark"===t.type)return(0,l.jsx)(T,{mdBlock:t,depth:a});else if("toggle"===t.type)return(0,l.jsx)(E,{mdBlock:t,depth:a});else if("embed"===t.type)return(0,l.jsx)(D,{mdBlock:t,depth:a});else if("link_to_page"===t.type)return(0,l.jsx)(K,{mdBlock:t});else if("table_of_contents"===t.type)return(0,l.jsx)(X,{mdBlock:t});else if("column_list"===t.type)return(0,l.jsx)($,{mdBlock:t,depth:a});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{})})}var V=a(2855);let Z=e=>{let{title:t,childPages:a}=e,{curriculumId:i}=(0,w.A)(),[c,s]=(0,r.useState)(window.scrollY),[o,d]=(0,r.useState)({width:window.innerWidth,height:window.innerHeight});(0,r.useEffect)(()=>{let e=()=>{d({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let u=()=>Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);return(0,r.useEffect)(()=>{let e=()=>{s(window.scrollY)};return window.addEventListener("scroll",e),e(),()=>{window.removeEventListener("scroll",e)}},[]),(0,l.jsx)("section",{className:"w-1/4 pl-4 fixed right-0",style:{top:c>u()-720?"".concat(u()-720-c+128,"px"):"128px"},children:(0,l.jsxs)("div",{className:"border fixed overflow-y-scroll scrollbar-thin py-4 rounded-md bg-white",style:{opacity:"100",height:"".concat(o.height/1.75,"px"),width:"".concat(o.width/5,"px")},children:[(0,l.jsx)("p",{className:"truncate text-sm px-1",children:t}),(0,l.jsx)("div",{className:"pl-3",children:a.map((e,t)=>(0,l.jsx)("div",{className:"p-0.5 mt-1 cursor-pointer w-48 hover:bg-neutral-100",style:{width:"".concat(o.width/5,"px")},children:(0,l.jsx)(n(),{href:"/posts/curriculums/".concat(i,"/").concat(e.id),className:"text-sm text-neutral-500 underline truncate",children:(0,l.jsx)("p",{children:e.title})})},t))})]})})};var ee=!0;let et=e=>{let{metadata:t,mdBlocks:a,pageNavs:i,childrenData:n,pageId:c,title:s}=e,{setCurriculumId:o}=(0,w.A)();return(0,r.useEffect)(()=>{o(t.curriculumId)},[]),(0,l.jsxs)(V.A,{pageNavs:i,sideNavProps:n,children:[(0,l.jsxs)("div",{className:"p-4 pt-24 pb-8",children:[(0,l.jsxs)("section",{className:n?"p-5 bg-white pb-10 md:w-3/4":"p-5 bg-white pb-10",children:[(0,l.jsxs)("div",{className:"flex",children:[c===t.curriculumId&&(0,l.jsx)(A(),{src:"/horizon-atlas/notion_data/eachPage/".concat(t.curriculumId,"/icon.png"),alt:"",width:20,height:20,className:"relative w-auto h-8 m-0 mr-2 top-0.5"}),(0,l.jsx)("h2",{className:"w-full text-2xl font-medium",children:s})]}),(0,l.jsx)("div",{className:"border-b mt-2"}),c===t.curriculumId&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),t.tags.map((e,t)=>(0,l.jsx)("p",{className:"text-white bg-sky-500 rounded-xl font-medium mt-2 px-2 inline-block mr-2",children:e},t))]}),(0,l.jsx)("div",{className:"mt-10 font-medium",children:(0,l.jsx)("div",{children:a.map((e,t)=>(0,l.jsx)(Q,{mdBlock:e,depth:0},t))})})]}),n&&(0,l.jsx)("div",{className:"hidden md:block md:w-1/4 mt-5",children:(0,l.jsx)(Z,{title:n.title,childPages:n.childPages})})]}),(0,l.jsx)("script",{async:!0,src:"//cdn.iframe.ly/embed.js"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[419,687,354,551,958,42,627,563,4,947,758,855,636,593,792],()=>t(1420)),_N_E=e.O()}]);