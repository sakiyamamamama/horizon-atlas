"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{2855:(e,s,t)=>{t.d(s,{A:()=>C});var l=t(4848),r=t(6540),a=t(3368),n=t.n(a);let i=()=>(0,l.jsxs)("footer",{className:"bg-gray-700 text-white py-8",children:[(0,l.jsx)("div",{className:"container text-5xl mx-auto gap-4 mb-5",children:"HorizonAtlas"}),(0,l.jsx)("p",{className:"mt-4",children:"\xa92025 Ryukoku Horizon"})]}),c=function(e){let{setOpenSide:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("button",{onClick:()=>s(!0),className:"flex flex-col gap-1.5 w-7 h-7 mt-2",children:[(0,l.jsx)("span",{className:"border border-neutral-500 w-7"}),(0,l.jsx)("span",{className:"border border-neutral-500 w-7"}),(0,l.jsx)("span",{className:"border border-neutral-500 w-7"})]})})};var d=t(9965),x=t.n(d),o=t(1988),m=t(9179);function u(){let{user:e,logout:s}=(0,o.WB)(),[t,a]=(0,r.useState)(!1),n=(0,r.useRef)(null),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{let s=e.target;i.current&&!i.current.contains(s)&&n.current&&!n.current.contains(s)&&a(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"max-w-md",children:[(0,l.jsxs)("div",{id:"toggle",ref:n,onClick:e=>{e.stopPropagation(),a(e=>!e)},className:"cursor-pointer flex rounded-lg shadow-lx  hover:translate-y-1 hover:opacity-85 duration-200",children:[(0,l.jsx)(x(),{src:(null==e?void 0:e.picture)||"",alt:"UserIcon",width:10,height:10,className:"h-auto w-9 rounded-full"}),(0,l.jsxs)("div",{className:"mt-0.5 ml-0.5",children:[(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:null==e?void 0:e.name}),(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:null==e?void 0:e.given_name})]})]}),t&&(0,l.jsx)("div",{id:"toggleTarget",ref:i,className:"z-50 border-solid border-neutral-300 border-2 absolute bg-white p-2 rounded-md w-32 translate-y-1 translate-x-[-15%]",children:(0,l.jsx)("ul",{children:(0,l.jsxs)("button",{onClick:()=>s({logoutParams:{returnTo:"https://sakiyamamamama.github.io/horizon-atlas"}}),className:"flex relative hover:bg-slate-200 rounded-sm p-1 pr-2",children:[(0,l.jsx)(m.vDZ,{size:18,className:"mt-0.5 mr-1.5 text-red-400"}),(0,l.jsx)("p",{className:"text-red-400",children:"ログアウト"})]})})}),(0,l.jsx)("div",{})]})})}var h=t(1106),j=t.n(h),p=t(4650),f=t(1583),v=t(3877);function g(e){let{setOpenbar:s}=e;return(0,l.jsx)("header",{className:"w-full bg-white",children:(0,l.jsxs)("div",{className:" text-white px-5 mb-0 flex justify-between items-center",children:[(0,l.jsx)("div",{children:(0,l.jsx)(x(),{src:"/horizon-atlas/logo_.png",alt:"",width:32,height:16,className:"w-[7.5rem] h-auto absolute top-[-29%] left-0.5"})}),(0,l.jsxs)("ul",{className:"hidden md:flex items-center pt-2 text-sm duration-100",children:[(0,l.jsx)("li",{className:"mr-4",children:(0,l.jsx)(j(),{href:"/search",children:(0,l.jsxs)("div",{className:"text-neutral-400 hover:text-purple-500 flex flex-col items-center text-center",children:[(0,l.jsx)(p.Mmj,{size:22}),(0,l.jsx)("p",{children:"検索"})]})})}),(0,l.jsx)("li",{className:"mr-4",children:(0,l.jsx)(j(),{href:"/user/progress",children:(0,l.jsxs)("div",{className:"text-neutral-400 hover:text-purple-500 flex flex-col items-center text-center",children:[(0,l.jsx)(f.jth,{size:22}),(0,l.jsx)("p",{children:"進捗度"})]})})}),(0,l.jsx)("li",{className:"mr-4",children:(0,l.jsx)(j(),{href:"https://docs.google.com/forms/d/e/1FAIpQLScW_wz_h2Yd5ij50k8vH91EPUn_0EenEOJ9M147bcVl8KTQLA/viewform?usp=dialog",target:"_brank",rel:"noopener noreferrer",children:(0,l.jsxs)("div",{className:"text-neutral-400 hover:text-purple-500 flex flex-col items-center text-center",children:[(0,l.jsx)(v._zH,{size:22}),(0,l.jsx)("p",{children:"改善要請"})]})})}),(0,l.jsx)("li",{children:(0,l.jsx)(u,{})})]}),(0,l.jsx)("ul",{className:"flex md:hidden items-center text-sm pt-2",children:(0,l.jsx)("li",{children:(0,l.jsx)(c,{setOpenSide:s})})})]})})}let N=function(e){let{pageNav:s}=e,[t,a]=(0,r.useState)(!1),n=(0,r.useRef)(null),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{let s=e.target;i.current&&!i.current.contains(s)&&n.current&&!n.current.contains(s)&&a(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{ref:n,className:"mr-2 px-1 hover:bg-neutral-200",children:(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),a(e=>!e)},className:"text-neutral-500",children:"..."})}),t&&(0,l.jsx)("div",{id:"toggleTarget",ref:i,className:"absolute bg-white p-2 rounded-xl translate-y-[45%] translate-x-[40%] shadow-2xl",children:s.map((e,s)=>(0,l.jsx)(j(),{href:e.id,className:"z-50",children:(0,l.jsx)("p",{className:"hover:bg-neutral-200 text-neutral-500 text-sm",children:e.title})},s))})]})};var b=t(8885);let w=function(e){let{pageNavs:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("nav",{className:"pl-4 bg-white duration-100 pt-1",children:[s.length>3&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(j(),{href:s[0].id,className:"pr-2 py-0.5 pl-1 hover:bg-neutral-200 text-neutral-500",children:(0,l.jsx)(b.M14,{size:18})}),(0,l.jsx)("p",{className:"cursor-default text-neutral-500",children:"/"}),(0,l.jsx)(N,{pageNav:s.slice(1,-2)}),(0,l.jsx)("p",{className:"cursor-default text-neutral-500",children:"/"}),(0,l.jsx)(j(),{href:s[s.length-2].id,className:"px-2 hover:bg-neutral-200 text-neutral-500 truncate max-w-[clamp(100px, 20vw, 250px)]",children:s[s.length-2].title}),(0,l.jsx)("p",{className:"cursor-default text-neutral-500",children:"/"}),(0,l.jsx)(j(),{href:s[s.length-1].id,className:"px-2 hover:bg-neutral-200 text-neutral-500 truncate max-w-[clamp(100px, 20vw, 250px)]",children:s[s.length-1].title})]})}),s.length<=3&&(0,l.jsx)("div",{className:"flex",children:s.map((e,t)=>(0,l.jsxs)("div",{className:"flex gap-1.5",children:[0===t&&(0,l.jsx)(j(),{href:e.id,className:"pr-2 pt-0.5 pl-1 hover:bg-neutral-200 text-neutral-500",children:(0,l.jsx)(b.M14,{size:18})}),0!==t&&(0,l.jsx)(j(),{href:e.id,className:"px-2 hover:bg-neutral-200 text-neutral-500 truncate max-w-[clamp(100px, 20vw, 250px)]",children:e.title}),t+1<s.length&&(0,l.jsx)("p",{className:"cursor-default text-neutral-500",children:"/"})]},t))})]})})},y=function(){let{user:e}=(0,o.WB)();return(0,l.jsxs)("div",{className:"flex cursor-pointer gap-1.5 border border-neutral-300 rounded p-1",children:[(0,l.jsx)("div",{children:(0,l.jsx)(x(),{width:20,height:20,src:(null==e?void 0:e.picture)||"",alt:"",className:"rounded-full w-9 h-auto"})}),(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"mt-1.5 mr-0.5 text-sm text-neutral-500",children:null==e?void 0:e.name})})]})};var z=t(633);let k=function(e){let{openbar:s,setOpenbar:t,pageNav:r}=e,{user:a,logout:n}=(0,o.WB)(),{curriculumId:i}=(0,z.A)();return(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)("div",{onClick:()=>t(!1),className:"bg-black opacity-45 fixed w-full top-0 block md:hidden",style:{height:"".concat((()=>{if(void 0!==window)return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)})(),"px"),zIndex:"9998"}}),(0,l.jsx)("div",{className:"fixed w-7/12 top-0 right-0 block md:hidden bg-white duration-700 h-screen",style:s?{transform:"translateX(0px)",zIndex:"9999"}:{transform:"translateX(130%)"},children:(0,l.jsx)("div",{className:"h-full overflow-y-auto p-3",children:(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{className:"flex items-center justify-between mr-5",children:[(0,l.jsx)("div",{}),(0,l.jsx)("p",{onClick:()=>t(!1),className:"cursor-pointer text-4xl text-neutral-500",children:"\xd7"})]}),(0,l.jsxs)("li",{className:"flex items-center justify-between mr-5 mt-3",children:[(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("p",{className:"mr-1 mt-3 text-neutral-500 text-sm",children:null==a?void 0:a.given_name}),(0,l.jsx)(y,{})]})]}),(0,l.jsx)("li",{className:"mt-3 hover:bg-neutral-100",children:(0,l.jsx)(j(),{href:"/search",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mr-5 py-2 px-2",children:[(0,l.jsx)(p.Mmj,{size:25,className:"text-neutral-600"}),(0,l.jsx)("div",{className:"text-neutral-500 font-bold",children:"カリキュラム検索"})]})})}),(0,l.jsx)("li",{className:"mt-3 hover:bg-neutral-100",children:(0,l.jsx)(j(),{href:"/user/progress",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mr-5 py-2 px-2",children:[(0,l.jsx)(f.jth,{size:25,className:"text-neutral-600"}),(0,l.jsx)("div",{className:"text-neutral-500 font-bold",children:"進捗度"})]})})}),(0,l.jsx)("li",{className:"mt-3 hover:bg-neutral-100",children:(0,l.jsx)(j(),{href:"https://docs.google.com/forms/d/e/1FAIpQLScW_wz_h2Yd5ij50k8vH91EPUn_0EenEOJ9M147bcVl8KTQLA/viewform?usp=dialog",target:"_brank",rel:"noopener noreferrer",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mr-5 py-2 px-2",children:[(0,l.jsx)(v._zH,{size:25,className:"text-neutral-600"}),(0,l.jsx)("div",{className:"text-neutral-500 font-bold",children:"改善要請"})]})})}),(0,l.jsx)("li",{className:"mt-2",children:void 0!==r&&(0,l.jsxs)("div",{className:"p-1 border border-neutral-400 rounded",children:[(0,l.jsx)("p",{className:"text-base",children:r.title}),void 0!==r.childPages&&r.childPages.map((e,s)=>(0,l.jsx)(j(),{href:"/posts/curriculums/".concat(i,"/").concat(e.id),className:"my-1.5 text-sm text-neutral-500 underline truncate",children:(0,l.jsx)("div",{className:"p-0.5 mt-1 cursor-pointer hover:bg-neutral-100",children:e.title})},s))]})}),(0,l.jsx)("div",{children:(0,l.jsx)("li",{className:"mt-3 hover:bg-neutral-100 cursor-pointer",onClick:()=>n({logoutParams:{returnTo:"https://sakiyamamamama.github.io/horizon-atlas"}}),children:(0,l.jsxs)("div",{className:"flex items-center justify-between mr-5 py-2 px-2",children:[(0,l.jsx)(m.vDZ,{size:25,className:"text-red-400"}),(0,l.jsx)("div",{className:"text-red-400 font-bold",children:"ログアウト"})]})})})]})})})]})};var E=t(6715),_=t(2955);function H(){let e=(0,E.useRouter)();return(0,l.jsx)("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"ログインが必要です"}),(0,l.jsx)("button",{className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",onClick:()=>{e.push("https://sakiyamamamama.github.io/horizon-atlas")},children:"OK"})]})})}function A(){return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)(_.A,{className:"animate-spin text-purple-400",size:48}),(0,l.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"読み込み中..."})]})}let C=e=>{let{children:s,pageNavs:t,sideNavProps:a}=e,[c,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(0),[u,h]=(0,r.useState)(!1),{isAuthenticated:j,user:p,logout:f,isLoading:v}=(0,o.WB)();return((0,r.useEffect)(()=>{j&&(async()=>{p.profile||(alert("Horizonメンバーアカウント以外はログインできません"),f({logoutParams:{returnTo:"https://sakiyamamamama.github.io/horizon-atlas"}}))})()},[j,p,v]),(0,r.useEffect)(()=>{if(void 0!==window){let e=()=>{let e=window.scrollY;e>x&&e>50?d(!1):d(!0),m(e)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}},[x]),v)?(0,l.jsx)(A,{}):j?(0,l.jsxs)("div",{className:"bg-white min-h-screen flex flex-col",children:[(0,l.jsxs)(n(),{children:[(0,l.jsx)("title",{children:"HorizonAtlas"}),(0,l.jsx)("meta",{name:"description",content:"HorizonAtlasは、学習カリキュラムをまとめたHorizon部員専用のサービスです。"}),(0,l.jsx)("meta",{property:"og:image",content:"/horizon-atlas/app_image.png"}),(0,l.jsx)("link",{rel:"icon",href:"/horizon-atlas/favicon.ico"})]}),(0,l.jsx)(k,{openbar:u,setOpenbar:h,pageNav:a}),(0,l.jsxs)("div",{className:"fixed top-0 z-50 w-full duration-500",style:c?{transform:"translateY(0px)"}:{transform:"translateY(-65%)"},children:[(0,l.jsx)(g,{setOpenbar:h}),(0,l.jsx)(w,{pageNavs:t})]}),(0,l.jsxs)("div",{className:"bg-gray-50 flex-grow",children:[s,(0,l.jsx)("div",{className:"h-5"})]}),(0,l.jsx)(i,{})]}):(0,l.jsx)(H,{})}},633:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(9836).v)(e=>({curriculumId:"",setCurriculumId:s=>e({curriculumId:s})}))}}]);