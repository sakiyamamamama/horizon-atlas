[
  {
    "type": "paragraph",
    "blockId": "19d2297f-7a72-8055-b01e-c0244965d4f5",
    "parent": "ここではアプリーケーションでデータを保存するために使用する「データベース」の基礎について学習できます。",
    "children": []
  },
  {
    "type": "paragraph",
    "blockId": "19d2297f-7a72-8058-b6f7-faae490820d8",
    "parent": "",
    "children": []
  },
  {
    "type": "paragraph",
    "blockId": "19d2297f-7a72-803c-9d73-f9c6c43cc883",
    "parent": "**Section1：基本情報**",
    "children": []
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-8167-ac83-da8e0ace31a5",
    "parent": "## データベースとは",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8182-ac21-da9330b876a0",
        "parent": "ここでは、データベース（Database）とは何か、その概要について紹介します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81a1-ae05-cd07acf97d75",
        "parent": "## データベースとは",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81a1-9947-d8502b9c19b7",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-818f-a8ed-cbb91b1d5aa3",
        "parent": "データベースは、データを効率的に保存・管理するためのシステムです。データを保存するだけであればメモ帳やファイルでも可能ですが、データベースは、データの検索や管理が容易という利点があります。そのため、多くのアプリケーションでデータベースが活用されています。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8144-8953-efd3da5dce0b",
        "parent": "## データベース管理システム（DBMS）",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-814a-880c-ec25f104defb",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816b-a4ed-db2c6e390a9c",
        "parent": "データベースは、「データを効率的に保存・管理・検索するための仕組み」ですが、それを可能にしているのが、**「データベース管理システム（DBMS）」**です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ed-846c-e6cd3298480a",
        "parent": "DBMSは、データベースを管理するためのソフトウェアです。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8154-909a-e52e02ee846c",
        "parent": "DBMSには種類がありますが、ここで紹介するのは「**リレーショナルデータベース」**と呼ばれるDBMSです。リレーショナルデータベースは、簡単に言えば、データをテーブル形式で管理するデータベースです。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81a7-9c10-d35f85d3478a",
        "parent": "## データの保存形式",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81fd-b81a-ff21de7daf05",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8198-9d6c-ee470e659b56",
        "parent": "では、リレーショナルデータベースでどのようにデータが保存されるのかを見ていきましょう。データベース内のデータは、表（テーブル）という形式で保存されます。",
        "children": []
      },
      {
        "type": "column_list",
        "blockId": "19d2297f-7a72-8108-ac63-ca8988165a57",
        "parent": "",
        "children": [
          {
            "type": "column",
            "blockId": "19d2297f-7a72-81d5-9512-cac1dccb854b",
            "parent": "",
            "children": [
              {
                "type": "paragraph",
                "blockId": "19d2297f-7a72-815e-b0c6-c79de80dd8ef",
                "parent": "例えば、右図のテーブルはプログラミング部の部員のデータをまとめたものです。ここでは、`id`、`name`、`group`、`post`といったカラム（列）でデータを整理しており、一人の部員ごとに行として保存されています。山田さんの場合、`id`が1で、`name`が山田、`group`が基礎班、`post`がnull（空）です。",
                "children": []
              }
            ]
          },
          {
            "type": "column",
            "blockId": "19d2297f-7a72-811e-8eda-c4355bc78603",
            "parent": "",
            "children": [
              {
                "type": "image",
                "blockId": "19d2297f-7a72-813d-8466-e4a1918ed73b",
                "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-07_19.42.38.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/52dddee3-6ef8-4f18-823c-3f87715e3729/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-07_19.42.38.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466WVXI4TTR%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063736Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJIMEYCIQCJKrmA6448j9aavNYHtAIyVP%2BKOQKKqHAh2bQn7qZpWAIhALX9WDA1pVTK0SpexFC18rNWnObH0oEEviiwivleio8vKv8DCHAQABoMNjM3NDIzMTgzODA1IgwnYj033FM6LWjICq8q3APnRdq2yOeuBP8YlLeNiaI7NpdaZPd7k5y4Z2lY0fEpuKFc2uChRyLswYLAfJuQWcJY6YVxTwPxEnyjZcF8Q6neiz%2BDGNGF8cQ86IbNL2i5oIIAC1w1spgCKHwZkS1h4pxvX2BpDYr7kjViaTFfyoGXr%2BLNugNVf8coXxckLKdIBMQOotqANWmDfUHtnhQn4Mnx7SQySFWvEF9bp2PmalUGOOYwcOc5EUB7ayd%2B5q2uh5CDj4oejz8lQZXfJrxCwCdlU8yB2LnrbRJwKAbMJa3XvRgQyPAVBE7JqzTM8Renrk%2BgK4JXgAKY%2B6YiHp8psB39Hi6RDxdZkkrvZ1gkPhoF9Y90mVjoT0FfbIGHGMT0jPBfbUUUBmOufZTLGeqzpbc%2F8KrOZDtJ8RjBut%2Fp1F87BOMU6l7UsF%2FEBus5LnkTdxIzb%2BlResUhvF9qerlX5kSj0VOvgYM8OvYlT65Pj6rFKsGhEHm1J4iJIasrMbblgKHmiOLFrgJ00FnN6EXVUN6O4TbcSUSayiU%2BwjhkoV8aFSzk61XQzVnapna06iJRvXnjL343yy0PSx%2Brrn69xnYkMVYoFLneXUNPvjhwD%2BmhXzFwSWHYuCcN5cSizf5sLTYk0YXtcD9IRrgFyTCfr8u9BjqkAUGa%2FY9BCAX%2Fw%2BCw%2BR%2B8tHPKf5o71Vt9RKKbyRAPHluRVl3bHjW%2FS8DaGDrur5QdGsR%2FOEqst5t8F4q1bUsevbYFTPpurFpgg1AvD1%2BKqqH3AiCOeQNc1%2F3VRodzV1L8ImfVoe2fY7omV%2BLcCDJVVnN8AkZXNOs4XJmcxrg3xTETOwz0KGf%2BsmNNwjuwWHIWYvk6t6CnlZ930owUHz5dlC13aK2f&X-Amz-Signature=2fe129fcba2657a00ca1861e37963f2428b004fd915cca514674a1e8e14fb496&X-Amz-SignedHeaders=host&x-id=GetObject)",
                "children": []
              }
            ]
          }
        ]
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8115-b2f9-fee58f906157",
        "parent": "## データベースの基本操作（CRUD）",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8125-a492-f0f0b2580cee",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8189-800e-eafcebf2056b",
        "parent": "データベースでの基本操作は、CRUDと呼ばれます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b8-af89-d864cd236d92",
        "parent": "CRUDは、以下の四つの操作の頭文字をとったものです。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8135-9bb9-e54d3e556478",
        "parent": "- **C**reate**（作成）**：新しいデータの追加",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8104-b3e2-dc8d9999eae5",
        "parent": "- **R**ead**（読み取り）**：データの取得",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81bf-9bb2-ec756abec41b",
        "parent": "- **U**pdate**（更新）**：既存のデータの変更",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8100-b279-c4fdd14667af",
        "parent": "- **D**elete**（削除）**：データの削除",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8150-96f9-c90df31105b3",
        "parent": "データベースは基本的に以上の四つの基本操作でほとんどのことが可能です。そして、データベースは、これらの操作を非常に簡単にできるようになっています。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81f8-a5f7-c7a395a0e824",
        "parent": "## まとめ",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8100-a8f6-cde082e9f324",
        "parent": "---",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81c0-8d1a-e3bc6bbdf10a",
        "parent": "- データベースは、データを保存できるだけでなく、データの検索や管理が容易であるという特徴があります。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8110-8950-f94e5853a1ae",
        "parent": "- データベースは、データベース管理システム（DBMS）によって、データの効率的な管理が可能となっています。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-816a-baca-ed7acf3192cd",
        "parent": "- データベースは、表（テーブル）の形式で保存されます。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-819f-9fba-dc48b5c93636",
        "parent": "- データベースは、CRUDと呼ばれる基本操作を簡単にできるようになっています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8191-b3e4-d6882e1b1226",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813b-aa56-c8cf0788f812",
        "parent": "次→[**Pythonでデータベースを扱うためのライブラリ**](/19d2297f7a7281908632dfe77e08f562)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819f-82f8-d3d849c057a7",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-8190-8632-dfe77e08f562",
    "parent": "## Pythonでデータベースを扱うためのライブラリ",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81a8-ac32-d129a8686c3d",
        "parent": "今回は、Pythonでデータベースを操作するためのライブラリの紹介をします。そして、データベースを便利に扱うためのVSCodeの拡張機能のインストールをしてもらいます。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81c5-921b-d7972cca912f",
        "parent": "## 使用するライブラリ",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8164-b07f-c1d14de93621",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-810a-96dd-e452ae0630b2",
        "parent": "Pythonでデータベースを扱うライブラリはいくつかありますが、ここでは「**sqlite3**」というライブラリを使用します。sqlite3は、pythonの標準ライブラリであるため、ライブラリをインストールする必要はありません。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8164-9b76-c6ccac6d531e",
        "parent": "sqlite3は、SQLiteという、軽量のDBMS（データベース管理システム）を扱えるライブラリです。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e1-ba9f-ccc9d4ee534a",
        "parent": "SQLiteは名前のとおり、簡易的な（ライトな）データベースです。データベースは大掛かりなシステムで利用される、という印象が強いものですが、SQLiteは簡易的に利用することが可能です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ee-ac77-f86418853d4a",
        "parent": "SQLiteが他のDBMS（データベース管理システム）よりも簡単にデータベースを扱える理由は、他の多くのDBMSがデータベースをサーバーとして扱うのに対して、SQLiteがデータベースをファイルで扱うからです。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-810a-a083-d44f3663e750",
        "parent": "## VSCodeで拡張機能をインストールする",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8167-972d-dbf159246050",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8105-b7a5-e78ec65c19e1",
        "parent": "sqlite3を使う前に、sqlite3を使う上で便利なVSCodeの拡張機能をインストールしましょう。「SQLite3 Editor」という拡張機能をインストールします。この拡張機能を入れることによって、sqlite3で扱うデータベースファイルの中身を見たり編集したりすることができるようになります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8135-b281-f7aa47a2e808",
        "parent": "VSCodeの画面左の拡張機能で「sqlite3」と検索してください。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-81d2-89c8-ecfc58e9d86e",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_13.07.28.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/2854f736-a4e9-4e6b-8e91-a28173196318/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_13.07.28.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466W72NRWWU%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063736Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIAlSWU6P0bbXZsnC4sYWSsK3SUn%2Bx3oJJe2agOlaV2vjAiEAxKGE6maqxkHGZicp%2Br8t22es4CQfEhTlE6oONybJeQMq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDESYerNh4IOKQJg2hSrcA364gDXX4Bb8Fyt2BGSXa9CPRoPCLJOw8jMz2oZTXUx7AeHLbzVEauPQqwSZYuaYRaTzHtptO3cs9bBaf%2F8XTdinkG9OLE06MRlJ1kNoLZ6kAi2I9DKKEGGcDGYSld2Zm9PEE%2BRtSNxlYZIeHuk4QX3JZJMPHg4zBJw%2FYuakkjem7dbiMhPmJtbV9F3rLj4LLAiOQ4LOOgcclWfn6%2FFGjS0bn2LH3rBh%2F2sH3PzdVreNgxBqiRg18nQGZcmcpFgQIzbVFJ%2FDBnT0lOfjUZvOUKlx3KxQ%2B8fECYLwLoNiuZOYYNs09%2Bklu4JxNVyqbdC1bMkViPX2cq57tj%2FK5T7r7rYNvVHDOcIR3GXmx75MAMUAxnbPjl7vNL%2B2LQoOS8V3gpBa9OCq8NiVCy3%2BqQ5ZOylOEaWc4%2FG9HsAc76E2JNEKrdO4PvC%2FuI%2FqPppCUuqyzc%2FAgIVQ9ltQP%2F1RFBCR7qZZeoYMoAWALwaFre2rrTjn7svXEy0e4MJ0G9xWqptfJjH1Bs6syxdeT3U68461o4%2FgSh3NAY%2BoKKnuyFu2TUtKDg2myLThy%2BXXojtwqn0mW4d62iCa%2FEpt292Lbev0DqtP6F9i%2Fw6vBMnYoA9MyEYPd5zEErymcSHLfemvMKevy70GOqUBVPGOEZ9YlpJPWI6K7H89DSuiFF2mZPKczzc%2Bwdi3r27WV0NVZU9%2B7SJsHfmniP91sbWNkuid%2Ff0OAuX4Jo%2F9wDmjZawoGaU8queaexZApJh%2Ft65M2OgMQIy6bkeODyo7yxKH9LvVCz7K7LE%2BuTEj14zNZjxu8mhvdqmkC%2FGRaevOwBGyuPlQLrGO3dwBTD73iR%2B2uHilnWILvdGtmWMom9QBfczT&X-Amz-Signature=a1718a9a1c28d92635ad393c45a02f63da77c702455e02060eaad1df8b99ad27&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ab-baec-d8d0bfe0f999",
        "parent": "「SQLite3 Editor」を選択して、インストールしてください。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-81f1-8059-dbce830b5ba1",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_13.12.00.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/f06992ee-a18b-4445-a7f3-3ceec5ae0963/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_13.12.00.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466W72NRWWU%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063736Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIAlSWU6P0bbXZsnC4sYWSsK3SUn%2Bx3oJJe2agOlaV2vjAiEAxKGE6maqxkHGZicp%2Br8t22es4CQfEhTlE6oONybJeQMq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDESYerNh4IOKQJg2hSrcA364gDXX4Bb8Fyt2BGSXa9CPRoPCLJOw8jMz2oZTXUx7AeHLbzVEauPQqwSZYuaYRaTzHtptO3cs9bBaf%2F8XTdinkG9OLE06MRlJ1kNoLZ6kAi2I9DKKEGGcDGYSld2Zm9PEE%2BRtSNxlYZIeHuk4QX3JZJMPHg4zBJw%2FYuakkjem7dbiMhPmJtbV9F3rLj4LLAiOQ4LOOgcclWfn6%2FFGjS0bn2LH3rBh%2F2sH3PzdVreNgxBqiRg18nQGZcmcpFgQIzbVFJ%2FDBnT0lOfjUZvOUKlx3KxQ%2B8fECYLwLoNiuZOYYNs09%2Bklu4JxNVyqbdC1bMkViPX2cq57tj%2FK5T7r7rYNvVHDOcIR3GXmx75MAMUAxnbPjl7vNL%2B2LQoOS8V3gpBa9OCq8NiVCy3%2BqQ5ZOylOEaWc4%2FG9HsAc76E2JNEKrdO4PvC%2FuI%2FqPppCUuqyzc%2FAgIVQ9ltQP%2F1RFBCR7qZZeoYMoAWALwaFre2rrTjn7svXEy0e4MJ0G9xWqptfJjH1Bs6syxdeT3U68461o4%2FgSh3NAY%2BoKKnuyFu2TUtKDg2myLThy%2BXXojtwqn0mW4d62iCa%2FEpt292Lbev0DqtP6F9i%2Fw6vBMnYoA9MyEYPd5zEErymcSHLfemvMKevy70GOqUBVPGOEZ9YlpJPWI6K7H89DSuiFF2mZPKczzc%2Bwdi3r27WV0NVZU9%2B7SJsHfmniP91sbWNkuid%2Ff0OAuX4Jo%2F9wDmjZawoGaU8queaexZApJh%2Ft65M2OgMQIy6bkeODyo7yxKH9LvVCz7K7LE%2BuTEj14zNZjxu8mhvdqmkC%2FGRaevOwBGyuPlQLrGO3dwBTD73iR%2B2uHilnWILvdGtmWMom9QBfczT&X-Amz-Signature=a30dd28b14127287d127dcf8f7324c0dd29cda2485df7a5894ba996c5543cfee&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81b7-ba2d-c8b5fba0503d",
        "parent": "## データベースファイル作成",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8141-9373-de39034c6611",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814e-b449-cce5b7ee99a5",
        "parent": "SQLiteで扱うデータベースファイルは、ファイルの拡張子が「.db」です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8194-9941-e5765aa329d3",
        "parent": "試しに、VSCode上で、「TEST.db」というファイルを作成してください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816a-ad21-f74277f80dae",
        "parent": "TEST.dbを開いてください。上述した拡張機能をインストールしていれば、以下のように表示されます。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-8109-8bd4-f3632a34d970",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_13.51.57.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/49f141d1-8733-4188-a0a3-8f8d959fc549/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_13.51.57.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466W72NRWWU%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063736Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIAlSWU6P0bbXZsnC4sYWSsK3SUn%2Bx3oJJe2agOlaV2vjAiEAxKGE6maqxkHGZicp%2Br8t22es4CQfEhTlE6oONybJeQMq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDESYerNh4IOKQJg2hSrcA364gDXX4Bb8Fyt2BGSXa9CPRoPCLJOw8jMz2oZTXUx7AeHLbzVEauPQqwSZYuaYRaTzHtptO3cs9bBaf%2F8XTdinkG9OLE06MRlJ1kNoLZ6kAi2I9DKKEGGcDGYSld2Zm9PEE%2BRtSNxlYZIeHuk4QX3JZJMPHg4zBJw%2FYuakkjem7dbiMhPmJtbV9F3rLj4LLAiOQ4LOOgcclWfn6%2FFGjS0bn2LH3rBh%2F2sH3PzdVreNgxBqiRg18nQGZcmcpFgQIzbVFJ%2FDBnT0lOfjUZvOUKlx3KxQ%2B8fECYLwLoNiuZOYYNs09%2Bklu4JxNVyqbdC1bMkViPX2cq57tj%2FK5T7r7rYNvVHDOcIR3GXmx75MAMUAxnbPjl7vNL%2B2LQoOS8V3gpBa9OCq8NiVCy3%2BqQ5ZOylOEaWc4%2FG9HsAc76E2JNEKrdO4PvC%2FuI%2FqPppCUuqyzc%2FAgIVQ9ltQP%2F1RFBCR7qZZeoYMoAWALwaFre2rrTjn7svXEy0e4MJ0G9xWqptfJjH1Bs6syxdeT3U68461o4%2FgSh3NAY%2BoKKnuyFu2TUtKDg2myLThy%2BXXojtwqn0mW4d62iCa%2FEpt292Lbev0DqtP6F9i%2Fw6vBMnYoA9MyEYPd5zEErymcSHLfemvMKevy70GOqUBVPGOEZ9YlpJPWI6K7H89DSuiFF2mZPKczzc%2Bwdi3r27WV0NVZU9%2B7SJsHfmniP91sbWNkuid%2Ff0OAuX4Jo%2F9wDmjZawoGaU8queaexZApJh%2Ft65M2OgMQIy6bkeODyo7yxKH9LvVCz7K7LE%2BuTEj14zNZjxu8mhvdqmkC%2FGRaevOwBGyuPlQLrGO3dwBTD73iR%2B2uHilnWILvdGtmWMom9QBfczT&X-Amz-Signature=d8bed83d1e86488f04badb4b22a94aa5f6caa7133c96caedd6399df889a4ccd5&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819a-a0cf-ed5a4e6f7597",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8196-bfa4-ed2a02722865",
        "parent": "次→[**データベースとの接続とテーブルの作成**](/19d2297f7a728170a321daff5ba9bc0a)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-818b-995a-d2cef29a3987",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "paragraph",
    "blockId": "19d2297f-7a72-80ea-bd69-ca451cb525f4",
    "parent": "**Section2：データベースの操作**",
    "children": []
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-8170-a321-daff5ba9bc0a",
    "parent": "## データベースとの接続とテーブルの作成",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814d-8122-ff55cb3e6291",
        "parent": "今回はpythonとそのライブラリであるsqlite3を使用して、データベースとの接続方法と、テーブルの作成方法を紹介します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-815c-8afe-efcc86a7cdd9",
        "parent": "## データの保存形式",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-813b-b408-d7d1756489ae",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ef-a12f-eec19d1eaec6",
        "parent": "データの保存形式については「[**データベースとは**](/19d2297f7a728167ac83da8e0ace31a5)」で一度説明しましたが、ここで改めて解説します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b1-8151-c117096ea6f5",
        "parent": "データベースはテーブル（表）の形式で保存されます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b0-a0f8-d9d6bfafcc3a",
        "parent": "以下は人の基本情報を保存するためのpersonテーブルの例です。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-8150-a460-eecebab4f81a",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_15.48.54.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/d57a5eff-e5c4-4df5-9992-99792d5af5ef/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_15.48.54.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4666TSTT45A%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063737Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJIMEYCIQD8OYq9yfev3NVjziIhjj55mq7e9FznDusUU%2FczmGP%2F3QIhAIf23a7DV%2FoJEtA3EiCUtdlvVV0edrQdn1todgR%2FxurEKv8DCHAQABoMNjM3NDIzMTgzODA1Igyxd%2B9iS7%2FpYKWQKAUq3AODJA3qGO9NqVfr9QsWm8Jk5Z2MYFwmXeyq2lLyCOCC23oHjEPQrmYN5s0lNFxB79Bt4rZ6Keep4v%2BrCarECcEaSihKGckArTeLum4ohWkUqVrqo4YgBF8O17n2tjouQ8s99E4bNQXqVYlnbuTu1EXv78WEI6qXepEnYtRCoXMwUAkxw6Y%2FP81TX1rFbIZUwKoY%2Fj5F4RzRwpMMf%2B%2Fhaj1pnnrJ1qoEA1VNpeIHSwoAg0P7jav9pbM%2F4yP24zFQNATrcfmE1bRijBAbKGRUSeGau%2BNHkhZPFJw%2ByBXUXVjEnQIDXntNyuUCvAmdZqs8x42irdSYIMzT2wklD6nC1JlMjcujELUSShoJvK3Tt9LquRceNa7vUUIz3S68AyO6Lr4u8pVF8LpzWJQV1zbGwnK6AJY1zZZlx81KsmlibqjMC9sZWOy1aha2PWVsU057VcH1ZFFmtjsvp56BACDsfbHjL2e2fxVQ70TKGQVqhifCCV3qYgmKhx0%2BA4K%2FjGghtLVEVEFqlKRr2xwkafeDdMHXhZxOsuawhi%2B6x7EwCfqgWNcenN5UaBuHTr%2FvA%2FzZ8OaEbRUPHR7Mopbi5%2BU3vZecUb%2BYx9AgaHp6XTktFTqT00JkWGO2dj5wrVaFuDDfr8u9BjqkAa%2BIbzvmMdOnsAWCmcjWAo9m5vJDcwwd83jdQzAT9NcoIH3TBOW34UxvGdVMlYD4svjcQPbvNTCM0fdNPpAdRFczWsDHB%2Fdkorf2or3kLXTPkta2ceEsszJnbQdwq9Q99CM1WdNbEoeLBNlWvA2kzDBfIn6ZFgHdpXOO8L9LC%2Fz8%2FvpisPcgx5GmmW7VPA6mQSXNDaN%2FFcVqEoVzqBRLBSQblPHg&X-Amz-Signature=ecca33fe7390146c4ad84f090724c33c52f61a6bc4abc734d8ee0e5967b49ec8&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8118-a80a-dc7fa533fffe",
        "parent": "**テーブル**は、データの集まりを格納する場所です。テーブルはデータを行とカラム（列）の構造で整理し、それぞれの行が個別のデータ項目を表し、列がデータの属性や種類を示します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8180-986f-ce146a719fe2",
        "parent": "**カラム**はテーブルの各列を指し、それぞれの属性を表します。例えば、personテーブルには、「id」、「name」、「gender」のカラムを含ます。カラムごとにデータの型（文字列、数値など）が決められており、各カラムに保存されたデータがその属性に応じた情報を提供します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ae-baac-df9f6ff6f26b",
        "parent": "**行**は、実際のデータが格納されている単位です。例えば、personテーブルの1行目が「1、Sato、Man」であれば、それが1つのデータとして保存されます。テーブル内の各行は通常、識別のために一意（他と重複しない値）のID（**主キー**）を持ちます。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8122-aae4-e79a83e2d783",
        "parent": "## データベースと接続する",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8144-9da7-de371fd60d49",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-818d-8953-c3f40a275ff6",
        "parent": "pythonでデータベースを操作するには、まずデータベースと接続する必要があります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81d9-8f2b-fa5ec2184628",
        "parent": "まず、「TEST.db」という名前のデータベースファイルを作ってください。\n(すでに「TEST.db」を作った人はそのままでいいです)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-810c-8c6b-f7b67093e915",
        "parent": "そして、conn.pyというファイルを作ってください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811e-b951-fb37c1bd99b3",
        "parent": "conn.pyに、以下のようなコードを書いてください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8165-bc14-c2860e7f0f1f",
        "parent": "> conn.py  \n> ```python  \n> import sqlite3  \n>   \n> # データベースファイルの名前を保持  \n> dbname = 'TEST.db'  \n> # データベースに接続  \n> conn = sqlite3.connect(dbname)  \n> # データベースを操作するカーソルオブジェクトを作成  \n> cur = conn.cursor()  \n> # データベースにデータをコミット  \n> conn.commit()  \n>   \n> # データベースの接続を切断  \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-813a-ac8a-d787916481ff",
            "parent": "```python\nimport sqlite3\n\n# データベースファイルの名前を保持\ndbname = 'TEST.db'\n# データベースに接続\nconn = sqlite3.connect(dbname)\n# データベースを操作するカーソルオブジェクトを作成\ncur = conn.cursor()\n# データベースにデータをコミット\nconn.commit()\n\n# データベースの接続を切断\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8129-a621-cd1642ebba26",
        "parent": "コードを上から順番に説明します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81a5-aea8-fbef415bc96f",
        "parent": "最初に、`sqlite3`モジュールをインポートします。\n`dbname`にデータベースの名前を代入します。\n`sqlite3`モジュールの`connect`関数の引数に`dbname`を入れて、データベースと接続します。\nデータベースを操作するための`cursor`オブジェクトを作成します。\nデータベースにデータをコミット（確定）します。\n最後に、データベースの接続を切断します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8156-a3cf-e4ea40ba9cb6",
        "parent": "これでデータベースに接続し、操作することが可能となります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-815b-b79d-d9049bc6f058",
        "parent": "このコードはsqlite3を使う場合、ほぼ毎回必要になります。これだけで内容を理解することはできないと思いますが、とりあえず今はデータベースを操作するために必要な前準備だと思っておいてください。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8113-bb3b-c4bc74e9893b",
        "parent": "## データベースの操作方法",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-814d-bd9b-f748585cbb2f",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b7-8499-c6f8b8ae5f51",
        "parent": "データベースを操作するためには、基本的に`cursor`オブジェクトの`execute` メソッドを使います。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8129-b608-df4da1d2cf90",
        "parent": "> データベース操作方法  \n> ```python  \n> cursorオブジェクト.execute('データベースへの命令')  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8164-904e-c79e2ee485f1",
            "parent": "```python\ncursorオブジェクト.execute('データベースへの命令')\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8175-8149-c0ac6475b78e",
        "parent": "データベースへの命令の部分は、**SQL**というデータベースを操作するための言語で書きます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-815f-877e-d2b9abc418a1",
        "parent": "CRUD操作（データの保存、データの取得、データの編集、データの削除）は、基本的にこの`execute`メソッドを使い、引数にSQL文を入れて行います。なお、SQL文の部分が文字列であることに注意してください。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-817b-a151-e66d44157b2d",
        "parent": "## データベーステーブルを作成する",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81dc-8a88-e117cb6f3652",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-812d-9078-d96117c123c0",
        "parent": "それでは、ここから実際にデータベースを操作しましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81f9-9124-ed2b45505d5b",
        "parent": "データを保存するためには、まずテーブルを作成しなければなりません。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813f-9412-f02d2f6dfcdf",
        "parent": "テーブルを作成するには、SQL文では`CREATE TABLE` を使います。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81e6-8de5-ca0e7dc5602b",
        "parent": "> `CREATE TABLE`の書き方  \n> ```sql  \n> CREATE TABLE テーブル名(’カラム名 カラムの属性’)  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-818c-8546-e50d11ab343f",
            "parent": "```sql\nCREATE TABLE テーブル名(’カラム名 カラムの属性’)\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81fe-863c-da54ab26e28d",
        "parent": "例えば、`person`という名前のテーブルに、`id、name、age、gender`というカラムを持たせたければ、下のように書きます。\nconn.pyの内容を以下のようにしてください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8186-b857-f6beced61ddc",
        "parent": "> conn.py  \n> ```python  \n> import sqlite3  \n>   \n> # データベースファイルの名前  \n> dbname = 'TEST.db'  \n> # データベースに接続  \n> conn = sqlite3.connect(dbname)  \n>   \n> # データベースを操作するカーソルオブジェクトを作成  \n> cur = conn.cursor()  \n>   \n> **# テーブル作成  \n> cur.execute(  \n>     'CREATE TABLE person(id INTEGER PRIMARY KEY AUTOINCREMENT, name STRING, age INTEGER, gender STRING)')**  \n>   \n> # データベースにデータをコミット  \n> conn.commit()  \n>   \n> # データベースの接続を切断  \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-815c-86d5-de9745e5bb71",
            "parent": "```python\nimport sqlite3\n\n# データベースファイルの名前\ndbname = 'TEST.db'\n# データベースに接続\nconn = sqlite3.connect(dbname)\n\n# データベースを操作するカーソルオブジェクトを作成\ncur = conn.cursor()\n\n**# テーブル作成\ncur.execute(\n    'CREATE TABLE person(id INTEGER PRIMARY KEY AUTOINCREMENT, name STRING, age INTEGER, gender STRING)')**\n\n# データベースにデータをコミット\nconn.commit()\n\n# データベースの接続を切断\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e8-be12-ed489b115b53",
        "parent": "テーブルを作成するSQL文は以下のようになっています。",
        "children": []
      },
      {
        "type": "code",
        "blockId": "19d2297f-7a72-81b7-ab12-d78770b6cfa8",
        "parent": "```sql\nCREATE TABLE person(id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, age INTEGER, gender TEXT)\n```",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-818a-856d-fae3f4645770",
        "parent": "- `id`の属性は、`INTEGER PRIMARY KEY AUTOINCREMENT`です。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8183-ad26-da2c9c25f304",
        "parent": "- `name`の属性は、`TEXT`です。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81c5-91e4-d247eb7e16f5",
        "parent": "- `age`の属性は、`INTEGER`です。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81b5-8466-fa17a47bc379",
        "parent": "- `gender`の属性は、`TEXT`です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813e-aac3-ec77661d36db",
        "parent": "まずidを見ましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8156-9b43-d1cad6609546",
        "parent": "`id`には、`INTEGER`、`PRIMARY KEY`、`AUTOINCREMENT`の三つの属性があります。\n・`INTEGER`は、値の型であり、pythonでいうところのint型です。\n・`PRIMARY KEY` は、テーブル内で各行を一意に識別するカラムに設定します。カラムは重複を許さず、`NULL` 値（空の値）も許可しません。\n・`AUTOINCREMENT`は、あるデータが保存される時、idの値を指定していなくても自動で値が入るようにする属性です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8128-b6bd-d3b19dcbc056",
        "parent": "他を見ると、`name`と`gender`の属性は`STRING`であり、`age`の属性は`INTEGER`です。\n・`TEXT`は、値の型であり、pythonで言うところのstr型です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819c-9cc0-cc64135e1f29",
        "parent": "一度、conn.pyを実行してみましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8187-a230-d74e4ba45b41",
        "parent": "TEST.dbの中を確認してください。TEST.dbの中が以下のようになっていればテーブルの作成に成功です。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-8111-bb2b-f70520d8cfc0",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_17.24.42.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/b7a3c3d0-9380-47b2-858a-d03b19055bc4/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_17.24.42.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4666TSTT45A%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063739Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJIMEYCIQD8OYq9yfev3NVjziIhjj55mq7e9FznDusUU%2FczmGP%2F3QIhAIf23a7DV%2FoJEtA3EiCUtdlvVV0edrQdn1todgR%2FxurEKv8DCHAQABoMNjM3NDIzMTgzODA1Igyxd%2B9iS7%2FpYKWQKAUq3AODJA3qGO9NqVfr9QsWm8Jk5Z2MYFwmXeyq2lLyCOCC23oHjEPQrmYN5s0lNFxB79Bt4rZ6Keep4v%2BrCarECcEaSihKGckArTeLum4ohWkUqVrqo4YgBF8O17n2tjouQ8s99E4bNQXqVYlnbuTu1EXv78WEI6qXepEnYtRCoXMwUAkxw6Y%2FP81TX1rFbIZUwKoY%2Fj5F4RzRwpMMf%2B%2Fhaj1pnnrJ1qoEA1VNpeIHSwoAg0P7jav9pbM%2F4yP24zFQNATrcfmE1bRijBAbKGRUSeGau%2BNHkhZPFJw%2ByBXUXVjEnQIDXntNyuUCvAmdZqs8x42irdSYIMzT2wklD6nC1JlMjcujELUSShoJvK3Tt9LquRceNa7vUUIz3S68AyO6Lr4u8pVF8LpzWJQV1zbGwnK6AJY1zZZlx81KsmlibqjMC9sZWOy1aha2PWVsU057VcH1ZFFmtjsvp56BACDsfbHjL2e2fxVQ70TKGQVqhifCCV3qYgmKhx0%2BA4K%2FjGghtLVEVEFqlKRr2xwkafeDdMHXhZxOsuawhi%2B6x7EwCfqgWNcenN5UaBuHTr%2FvA%2FzZ8OaEbRUPHR7Mopbi5%2BU3vZecUb%2BYx9AgaHp6XTktFTqT00JkWGO2dj5wrVaFuDDfr8u9BjqkAa%2BIbzvmMdOnsAWCmcjWAo9m5vJDcwwd83jdQzAT9NcoIH3TBOW34UxvGdVMlYD4svjcQPbvNTCM0fdNPpAdRFczWsDHB%2Fdkorf2or3kLXTPkta2ceEsszJnbQdwq9Q99CM1WdNbEoeLBNlWvA2kzDBfIn6ZFgHdpXOO8L9LC%2Fz8%2FvpisPcgx5GmmW7VPA6mQSXNDaN%2FFcVqEoVzqBRLBSQblPHg&X-Amz-Signature=de37a9f5200bcc2ab3c10dfa3ba9f344196b1cb9c7180676b6aca09ed08d0ca4&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8128-a37c-dd4f18dbfb06",
        "parent": "> 💡 ちなみに、データベースではテーブルを複数作ることが可能です",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e6-8a50-d7fefdadfc9b",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81cc-96a5-f71f44a473f2",
        "parent": "次→[データの保存(Create)](/19d2297f7a72819d8eccded1c97afcc0)",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-819d-8ecc-ded1c97afcc0",
    "parent": "## データの保存(Create)",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8184-9b66-eb943bb2dcd7",
        "parent": "今回はpythonとそのライブラリであるsqlite3を使用して、データベースにデータを保存する方法を紹介します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8113-a47c-e5ec43d7d2ce",
        "parent": "## データの保存方法",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-819b-8dad-fe172e3dc5e5",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ad-b365-ca3c1795593b",
        "parent": "データを保存する方法を見てきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81c1-85d8-d3f5e0f7fe08",
        "parent": "> データを保存するSQL文  \n> ```sql  \n> INSERT INTO テーブル名(カラム名) VALUES (保存する値)  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81a0-938a-cdce49730dcd",
            "parent": "```sql\nINSERT INTO テーブル名(カラム名) VALUES (保存する値)\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81f2-add3-f595c3c16e68",
        "parent": "データを保存するときは`INSERT`を使います。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c8-b88a-e8898b258857",
        "parent": "`INTO テーブル名（カラム名）` の部分で、どこにデータを保存するかを指定します。`VALIES (保存する値)`の部分で、保存したいデータの値を指定します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81eb-b2d6-f3f372a5d78f",
        "parent": "## 実際にデータを保存してみよう",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81f5-bd88-cb87ca08fee5",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8137-bf8d-d0dbd0831ddb",
        "parent": "「[**データベースとの接続とテーブルの作成**](/19d2297f7a728170a321daff5ba9bc0a)」で作成した`person`テーブルにデータを保存して見ましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8111-8165-fb1cf7021e4c",
        "parent": "新たに、create.pyというファイルを作ってください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-812d-9e14-f2fbf965e137",
        "parent": "create.pyの中身を以下のようにしてください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8161-994c-e538939d0a0f",
        "parent": "> create.py  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# データを保存する  \n> cur.execute('INSERT INTO person(name, age, gender) VALUES (\"Sato\", 15, \"Man\")')**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81b4-985e-ea7eb7caee8c",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# データを保存する\ncur.execute('INSERT INTO person(name, age, gender) VALUES (\"Sato\", 15, \"Man\")')**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814f-9bde-d1f66024cdd3",
        "parent": "SQL文は以下のようになっています。",
        "children": []
      },
      {
        "type": "code",
        "blockId": "19d2297f-7a72-813d-8163-c2bec2fc1c6c",
        "parent": "```sql\nINSERT INTO person(name, age, gender) VALUES (\"Sato\", 15, \"Man\")\n```",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81d8-bce3-f77aa07723b2",
        "parent": "まず、`INSERT INTO person(name, age, gender)` の部分で、どこにデータを入れるかを決めています。今回は`person`テーブルの中のカラム`name、age、gender`にデータを入れることを指定しています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81af-83a8-fc8049f79b18",
        "parent": "`VALUES (”Sato”, 15, “Man”)` の部分で、何の値を入れるかを決めています。`name`に`”Sato”`、`age`に`15`、`gender`に`”Man”`を入れています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8172-96df-cf2cefa3428e",
        "parent": "ちなみに、カラム`id` は、`AUTOINCREMENT` 属性があるので値を挿入しなくても自動で値が入れられます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ee-a72c-c48465b1a11d",
        "parent": "pythonのファイルを実行してみましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81a6-b942-d44252eae132",
        "parent": "TEST.dbの中身が以下のように表示されればデータの保存に成功しています。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-812a-8259-c9e4e9d1c88d",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_22.56.58.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/ee0793a2-718f-497e-aa9d-697e811ad866/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-11_22.56.58.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QUSFY5HM%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063743Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIQCMbla1FubD4fC5IaON0CcCURkY1cDxFF51mquZjeSqJwIgaNFhnBR9hhmadn%2FmtulyHJqT%2BjrVl0%2Fw0cbDdd7BeeIq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDK4Rj%2Bmnu4ddiLfNPircA8XCDQoObWwvignyB3xr%2FsR7MUk6sQxBzgP2djFhctlRxAQxTy74l%2FnJvB0807cEKBM2g68SKoM5ypBQaoToQqsot%2FX%2FL9XWvgJRC3lJtRk54Wx10iy2%2B1bIUcjNZfeP66mrfjhLNqpM6ptJbZtW%2BZNMxE0mWBULT%2FyVxCYnwlD4y1AnSNKZacRYlwwaP%2BpYKiVscHhgaD4k79PlISWXDDIbXTDqeJ%2FdA5h6Jor%2BgjJSWeS%2FHE3ppAunkOgl3AdzmHfbC%2B%2BnRuNPyLAtwk7j%2BYHuC3mJ2ZScCNrX1BVegqBZ3KIX4%2FwQY1QNHK4yXM8zvfvqxRjSH%2FS8iigPgIuFsVbRo%2Fbg%2FiDwiBmRWPBLBjU%2BsHHO9Hp6FSxuB5prErVU9VEE37xGd4azpNP5e95w3Ao1bCKFfP72l85UYc8qSgkIqo6G7KWIe8q%2Fml7H6OyqA6LwjfZkuTbefLuvdr332GH7cad0bT2jD8komYNwmeKkR2nF%2FimdipMcisKJCxi0Gjdd2CcUJ%2B6faA5T3QM7%2BxXBGdC8mAwfBhSAXrdYOzrcqRKE%2BItzqAT7KpaTkvx9VQ6nbewX7j9GejtSEyzdo0nG1ruidZXE7md%2F%2F2h%2FElwNUsuy4XsWbedmzZuLMOKvy70GOqUBT59f0GsySYY03%2Fx6meAV94%2FP8PumM%2BP%2BldwRVGeHEINU2WC5UZ9gSjHOhazJHqUWvyK6AvH4%2B5hVAy9Z8J6QEL5rUMcDj5NqYGGLD58TefMxWJ6BnONjXQekkJEGg4dTXjfVZ9jCQY%2F9%2FDmESo8YGrx9%2FqPB0xQBFkdtYEBtTq08WMDBuAxrzyo6BslxczGTXasAl%2FPgSEuhkJ%2BgAS9%2BlCVcpea5&X-Amz-Signature=634961a7e3b440bd69f76493ae9ec82a63d3b45c63f3f43097588541a0937476&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8158-95e2-f15cc90ad667",
        "parent": "## 任意のデータを扱う",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8196-915d-c49aeccb2bdf",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b9-b632-c179451cecbd",
        "parent": "上記の方法でデータを保存することができますが、この方法では決まった値しか保存できません。実際のアプリでデータベースを利用するには、任意の値を保存できるようにしないと、あまり実用的ではないです。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8176-847a-d826730ee5ac",
        "parent": "例えば、以下のコードだと、`\"Sato\", 15, \"Man\"` という決まった値しか保存できません。",
        "children": []
      },
      {
        "type": "code",
        "blockId": "19d2297f-7a72-81ec-823c-c38e42829480",
        "parent": "```python\ncur.execute('INSERT INTO person(name, age, gender) VALUES (\"Sato\", 15, \"Man\")')\n```",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ab-931a-eb507a93653e",
        "parent": "では、任意の値を保存する方法を見ていきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8131-83f0-db92de745bf0",
        "parent": "> 変数で任意の値を保存するコード  \n> ```python  \n> cur.execute('INSERT INTO テーブル名(カラム名) VALUES (?)',(保存したい値))  \n> ```  \n>   \n> 🛑 `cur` = `cursor`オブジェクト",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81a0-98e1-e95ea6527298",
            "parent": "```python\ncur.execute('INSERT INTO テーブル名(カラム名) VALUES (?)',(保存したい値))\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81f3-8d81-eb8e40a500bc",
            "parent": "🛑 `cur` = `cursor`オブジェクト",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813e-9a7d-f304068c3aa0",
        "parent": "このコードだと、変数に代入した任意の値を保存できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819b-a543-d9281d39a8b7",
        "parent": "SQL文の、保存する値を入れる部分に`?` を入れます。そして、`execute` メソッドの二つ目の引数に、保存したい値の入ったタプル型を入れます。（タプル型については「[**タプル型**](/148a501ef337807b9b66c238f93463b1)」をご覧ください）",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-815a-9102-dc6b886a83d6",
        "parent": "例えば、personテーブルにデータを変数で保存するなら以下のように書きます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-818e-9fca-c041a690ecda",
        "parent": "> personテーブルにデータを変数で保存する  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# 任意の値を入れる  \n> name = \"Hashimoto\"  \n> age = 26  \n> gender = \"Woman\"  \n>   \n> # データを保存する  \n> cur.execute('INSERT INTO person(name, age, gender) VALUES (?, ?, ?)', (name, age, gender))**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8175-8185-d8346abd404d",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# 任意の値を入れる\nname = \"Hashimoto\"\nage = 26\ngender = \"Woman\"\n\n# データを保存する\ncur.execute('INSERT INTO person(name, age, gender) VALUES (?, ?, ?)', (name, age, gender))**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8147-924c-d04eda1e0cc7",
        "parent": "このコードだと変数の内容を変えれば保存するデータの値を変えることができます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8133-a6de-c58836a2ea2c",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ff-b156-ccbb037d66c5",
        "parent": "次→[**データの取得(Read)**](/19d2297f7a7281aeab43f15cda8b9b88)",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-81ae-ab43-f15cda8b9b88",
    "parent": "## データの取得(Read)",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8132-8c4f-db436e40f85f",
        "parent": "今回はpythonとそのライブラリであるsqlite3を使用して、データベースのデータを取得する方法を紹介します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81b1-a92a-d43e92e9a61a",
        "parent": "## データの取得方法",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81a2-bdae-e4efee9d2027",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8140-b6e3-f2372ee0b9f2",
        "parent": "データを取得する方法を見ていきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81af-badb-d2b43a76e6e8",
        "parent": "> データを取得するSQL文  \n> ```sql  \n> SELECT カラム名 FROM テーブル名  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8109-bc40-c955b6478568",
            "parent": "```sql\nSELECT カラム名 FROM テーブル名\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81bb-9c32-df0dbf3a14ed",
        "parent": "これで指定したテーブルの中のカラムを取得できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8110-846f-d005002bea6a",
        "parent": "テーブル内のすべてのデータを取得したい場合はカラム名に`*`を指定します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-812f-b555-df07b92f2132",
        "parent": "> テーブル内のすべてのデータを取得する  \n> ```sql  \n> SELECT * FROM テーブル名  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81ac-87d0-ea8ab0c9e04d",
            "parent": "```sql\nSELECT * FROM テーブル名\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e3-b42a-fc71e7379cf4",
        "parent": "取得するデータの条件を指定するには、`WHERE` 句をつけます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-816f-bf6a-f1de925503b4",
        "parent": "> 取り出すデータに条件を指定する  \n> ```sql  \n> SELECT カラム名 FROM テーブル名 WHERE 条件  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-819e-bdb7-c64f081294df",
            "parent": "```sql\nSELECT カラム名 FROM テーブル名 WHERE 条件\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8158-8a9e-c38c03df3455",
        "parent": "条件をつけることでどの行のデータを取得するかを指定できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-818b-b789-ca201c9f12dc",
        "parent": "条件には、「idが何か」を指定することが多いです。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8168-8a51-cc2f6a99885d",
        "parent": "例えば、`id`の値が`1`の行のデータを取り出したい場合は以下のように書きます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81d7-b836-c2dd559b6975",
        "parent": "> id=1のデータのみを取得する  \n> ```sql  \n> SELECT * FROM テーブル名 WHERE id = 1  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81e9-adb9-c24e90849cd5",
            "parent": "```sql\nSELECT * FROM テーブル名 WHERE id = 1\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81a9-b349-fdc7c80c7054",
        "parent": "条件を複数指定する時は、`AND` を使います。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8199-bc6a-edf9aa7a1317",
        "parent": "> 複数の条件を指定する  \n> ```sql  \n> SELECT カラム名 FROM テーブル名 WHERE 条件1 AND 条件2 AND ...  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8190-95f3-ebedab7e03e3",
            "parent": "```sql\nSELECT カラム名 FROM テーブル名 WHERE 条件1 AND 条件2 AND ...\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81d7-a03b-eed6699a6ddc",
        "parent": "## 実際にデータを取得してみよう",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81e0-9900-dfc43230048c",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8154-9c94-cc061548d163",
        "parent": "「[**データの保存(Create)**](/19d2297f7a72819d8eccded1c97afcc0)」で保存したデータを取得してみよう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819f-ad23-fb47275528a8",
        "parent": "新たにread.pyを作成してください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c5-b3c0-da70442d8613",
        "parent": "read.pyの内容を以下のようにしてください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8181-914f-e51bf9545b97",
        "parent": "> read.py  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# personテーブルデータを全件取得  \n> cur.execute('SELECT * FROM person')  \n> data = cur.fetchall()  \n> print(data)**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81c4-9f45-d4f6756ac340",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# personテーブルデータを全件取得\ncur.execute('SELECT * FROM person')\ndata = cur.fetchall()\nprint(data)**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813a-8c55-f5e7c0502257",
        "parent": "このコードを実行してください。\n以下のように出力されればデータの取得に成功です。",
        "children": []
      },
      {
        "type": "code",
        "blockId": "19d2297f-7a72-8139-875f-e365044c2869",
        "parent": "```bash\n[(1, 'Sato', 15, 'Man')]\n```",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b4-8810-eb6974be4179",
        "parent": "コードを見ていきましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b6-93cd-de68168044ec",
        "parent": "まず、`cur.execute(’SELECT * FROM person’)` で、`person`テーブルのデータをすべて取得するSQL文を実行します。次に、`fetchall`メソッドで取得したデータを全て変数`data`に代入し、`print`で出力しています。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81db-be80-ef189dd6d9ec",
        "parent": "## 任意のデータを扱う",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8198-901c-f4735b629090",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819a-9009-e7df3e158fd4",
        "parent": "データの取得をより実用的に扱うには、データを取得するとき、任意の値で条件を指定する必要があります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8169-b2f9-db05ea232268",
        "parent": "任意の値で条件を指定する方法を見ていきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8172-a445-dcf560eba8c6",
        "parent": "> 例：idが任意の値の条件を指定する  \n> ```python  \n> cur.execute('SELECT カラム名 FROM テーブル名 WHERE id = ?',(指定したいidの値))  \n> ```  \n>   \n> 🛑 `cur` = `cursor`オブジェクト",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8131-81ae-e55e244ccc8f",
            "parent": "```python\ncur.execute('SELECT カラム名 FROM テーブル名 WHERE id = ?',(指定したいidの値))\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8195-8427-f8cbe9faf0a5",
            "parent": "🛑 `cur` = `cursor`オブジェクト",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c0-a283-fc3e636361a5",
        "parent": "例えば、personテーブルから、任意のidの行のデータを取得するコードは以下のようになります。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81a9-8de0-d2188e5a2acd",
        "parent": "> personテーブルから、任意のidの行のデータを取得する  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# 任意の値を入れる  \n> target_id = 1  \n>   \n> # personテーブルから任意の行のデータを取得  \n> cur.execute('SELECT * FROM person WHERE id = ?',(target_id,))  \n> data = cur.fetchall()**  \n>   \n> # 取得したデータを出力  \n> print(data)  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-810f-8f54-f50bf2efb48d",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# 任意の値を入れる\ntarget_id = 1\n\n# personテーブルから任意の行のデータを取得\ncur.execute('SELECT * FROM person WHERE id = ?',(target_id,))\ndata = cur.fetchall()**\n\n# 取得したデータを出力\nprint(data)\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-815e-83b2-d72db9c3f071",
        "parent": "このコードだと、`target_id`の値によって、テーブルから取得するデータの行が変わります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8124-8e1c-d437ef5fe615",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e2-b8ae-da720cbca459",
        "parent": "次→[**データの編集(Update)**](/19d2297f7a728165b201cd77e1e2d2f2)",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-8165-b201-cd77e1e2d2f2",
    "parent": "## データの編集(Update)",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8110-9729-f5bc4ff77e6a",
        "parent": "今回はpythonとそのライブラリであるsqlite3を使用して、データベースのデータを編集する方法を紹介します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81f3-aeef-cd7f953f996c",
        "parent": "## データの編集方法",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81ab-976b-dae39dd8212f",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-812c-9cc0-c4b0a171e4ae",
        "parent": "データの編集方法を見てきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81a4-8120-cef7a7101841",
        "parent": "> データを編集するSQL文  \n> ```sql  \n> UPDATE テーブル名 SET カラム名 = 値 WHERE 条件  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-814e-8246-ca75b3e3b669",
            "parent": "```sql\nUPDATE テーブル名 SET カラム名 = 値 WHERE 条件\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81df-8969-e9f40e8e6deb",
        "parent": "データを編集するときは`UPDATE`を使います。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8167-9cca-c92979195ff4",
        "parent": "`テーブル名`の部分でどのテーブルかを指定します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8153-8aa0-e37141b013fd",
        "parent": "`SET カラム名 = 値` で、どのカラムのデータの値を何にするかを指定します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8104-8a77-e0c78dd0b587",
        "parent": "`WHERE 条件` で、どの行のデータかを指定します。\n`WHERE`句がなければテーブルの中のすべてのデータを書き換えてしまうので、基本的につけるようにしましょう。\n`WHERE`で指定する条件は、ほとんどの場合「idが何か」です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-810c-b7ec-cc8e1b8ae907",
        "parent": "例えば、id=1の行のデータを編集したい場合は次のように書きます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8103-8cce-ffd694eae28b",
        "parent": "> id=1のデータを編集する  \n> ```sql  \n> UPDATE テーブル名 SET カラム名 = 値 WHERE id = 1  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81ad-86b9-ffd9c2ba1294",
            "parent": "```sql\nUPDATE テーブル名 SET カラム名 = 値 WHERE id = 1\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81ba-9727-c39e88a221b7",
        "parent": "## 実際にデータを編集してみよう",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8189-b48c-e9ee512eba67",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ea-9123-fe9fca2b1cfc",
        "parent": "「[**データの保存(Create)**](/19d2297f7a72819d8eccded1c97afcc0)」で保存したデータの値を編集してみましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81dc-9b72-ca1cf85142b0",
        "parent": "update.pyというファイルを作成してください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81cc-aa68-c49070d90d88",
        "parent": "update.pyの内容を以下のようにしてください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81ce-8acb-dbb9cc28435b",
        "parent": "> update.py  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# データの編集  \n> cur.execute('UPDATE person SET name = \"Fujiwara\", age = 69, gender = \"Woman\" WHERE id = 1')**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8107-9b21-ff0caef81dd7",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# データの編集\ncur.execute('UPDATE person SET name = \"Fujiwara\", age = 69, gender = \"Woman\" WHERE id = 1')**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c0-9d10-eda72d82ed18",
        "parent": "update.pyを実行してください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ff-b314-e3f7941a2ff8",
        "parent": "TEST.dbの内容が以下のようになっていれば編集に成功しています。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-813b-8704-cf85196ec07d",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-12_10.38.24.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/d7bfc2f6-79cd-43f9-bcd9-4930a6a9e0b6/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-12_10.38.24.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466ZLXDHFAK%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063756Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIQDlkCOpsDzps70pf9mV288riHs0OUEYT0mTTNdy0gxTXwIgI8TTsRJxRRwU3EcdxOogHS4Eh7g2xLCYtFxiA5N1wE4q%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDHkewJmXGk6e%2FuuZvCrcAxn5IE%2BEMa6toApYJJCm%2FvnA6xUfuxgh1Y5fFaB9TR2TcCHiHHdP87QBTga9U4QDPJ4C50bQhiiUdeaKzwvjyBXVbNJdnIxqFFoU3OEv5aIbBxA%2BR5AtsrAOAUiHXH9n7RQcnwBjTOPZmxNgaOnFDyEvMqq60xp6OXjXHdZD7rT%2BPnar%2BD3UFqLgGaH7o%2F%2BO%2BkGvoKp7%2Bp361kHRXBoiWzC2dlZ1srrTFq%2B%2Fgun3w9ZNVnZ4TjLgPMcDu9ArV%2F3oZURrCArBuRlF23qqbhCa%2BLnOm3RFBy9yTkEHEZCFQX08jiVdRAGNDHPfnMwnrGenyp9iYsZLJk1i8I5bErZafYrspReWoLmNp3ngHcmTA2fWn%2FaaNW3rgHITCwOXEhkuHIEZh3O4%2FrY7%2BpvxJJcQ%2BunW1HF3wq2XVfbRcYYSkEvj67MQIkM6jshTUABEPLfqhrfBpYANPJ%2F6P7iyNvgUPTo2%2FgQ%2FuBtys6Kb1GYVxxtvYmkV4tdxJkRqkIQ3vn04NP%2BkicDUjSgja2nB399DS5HESOtXFmPOGK5UQwZLPY%2F4O1szDRLOnNLMxffec712mlpxv3ZSSuIs9ABrT73Z1aQlM6YujArYWVIxw8%2FllyY4wyEUi%2BNlfwAXn1V0MNivy70GOqUBN6sbizZTPsHtPhJ4VyJILbNqde2QB0pN8uetjJMC%2F9WY5NIIkkgb8CtIvDiiD8MY9gP%2FLMKmZJDLeM4FKhYQaOaxIUKwIOK%2FdAoaIUSeFb1u0BccGchvsltVbOFcimx2ezXg7lAZ%2FT6oDd2wUKEL0LERgoeJ1cAPVzU6wEV%2FfgOlclsip73uv%2BJPZGrTVBBxeNY7VMhEXZazrmLunVJ3QlcSylGu&X-Amz-Signature=553178d49d8ac93145ff8632c36e723a366e9b5f41aa9266a8db1517bd699ee0&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816f-ad32-dae4dfbaf738",
        "parent": "では、コードを見ていきましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813e-b58d-d2d1c6fc2e64",
        "parent": "SQL文は以下のようになっています。",
        "children": []
      },
      {
        "type": "code",
        "blockId": "19d2297f-7a72-8172-873c-f623792fb396",
        "parent": "```sql\nUPDATE person SET name = \"Fujiwara\", age = 69, gender = \"Woman\" WHERE id = 1\n```",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8197-a12b-dce1dd3cfdf5",
        "parent": "`UPDATE` で、データを編集することを示しており、その後の`person`で、対象が`person`テーブルであることを示しています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ca-928d-d0f9ef0fc12e",
        "parent": "`SET name = \"Fujiwara\", age = 69, gender = \"Woman\"` の部分で、カラム`name`の値を`”Fujiwara”`に変更し、カラム`age`の値を`69`に変更し、カラム`gender`の値を`”Woman”`に変更することを指定しています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81f8-a769-fef3c55c00df",
        "parent": "`WHERE id = 1` で、`id`が`1`の行が対象であることを指定しています。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81c6-b0ca-fa1c7598ceff",
        "parent": "## 任意のデータを扱う",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8167-acbd-e0eeb800656b",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81bd-9e14-d762ca4aec0a",
        "parent": "データの編集をより実用的に扱うためには、任意の値でデータを編集したり、任意の値で条件を指定する必要があります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8110-8d9f-d1e337280612",
        "parent": "任意の値でデータを編集する方法を見ていきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8123-aaa8-c4b7f8486a84",
        "parent": "> 任意の値で、任意のidの行のデータを編集する方法  \n> ```python  \n> cur.execute('UPDATE テーブル名 SET カラム名 = ? WHERE id = ?', (編集後の値, 指定したいid))  \n> ```  \n>   \n> 🛑 `cur` = `cursor`オブジェクト",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81f1-99fc-e0c6c4d7abc7",
            "parent": "```python\ncur.execute('UPDATE テーブル名 SET カラム名 = ? WHERE id = ?', (編集後の値, 指定したいid))\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81f7-b4ae-ea1e9f81524e",
            "parent": "🛑 `cur` = `cursor`オブジェクト",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-817b-a8c8-c53dc867c511",
        "parent": "例えば、personテーブルの任意のidの行のデータを任意の値で編集するには以下のようなコードとなります。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81b6-aa03-fa88ea01fcf9",
        "parent": "> personテーブルを任意の値で、任意のidの行のデータを編集する  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# 任意の値を入れる  \n> name = \"Tanaka\"  \n> age = 89  \n> gender = \"Man\"  \n> target_id = 1  \n>   \n> # データの編集  \n> cur.execute('UPDATE person SET name = ?, age = ?, gender = ? WHERE id = ?',(name, age, gender, target_id))**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8105-8d1f-efa1f103eee7",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# 任意の値を入れる\nname = \"Tanaka\"\nage = 89\ngender = \"Man\"\ntarget_id = 1\n\n# データの編集\ncur.execute('UPDATE person SET name = ?, age = ?, gender = ? WHERE id = ?',(name, age, gender, target_id))**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81cc-a0ed-e7c089d27861",
        "parent": "このコードで、personテーブルの任意のidの行のデータを、任意の値で編集できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8116-8166-eb13eef11461",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-817f-ac4a-f5c8caae81b7",
        "parent": "次→[**データの削除(Delete)**](/19d2297f7a72812f8685d8d24d05ae5f)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-808e-a299-e3ef88bdb532",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-812f-8685-d8d24d05ae5f",
    "parent": "## データの削除(Delete)",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81a2-bd15-cb3b7cab37b3",
        "parent": "今回はpythonとそのライブラリであるsqlite3を使用して、データベースのデータを削除する方法を紹介します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81ee-b898-e7cf8a3001fe",
        "parent": "## データの削除方法",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-819c-b003-fa664f0cf8a4",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814c-80ab-d14a09d195ba",
        "parent": "データの削除方法を見ていきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81d1-a0a3-c118eaa384ee",
        "parent": "> データを削除するSQL文  \n> ```sql  \n> DELETE FROM テーブル名 WHERE 条件  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8171-b783-f0a0129083a3",
            "parent": "```sql\nDELETE FROM テーブル名 WHERE 条件\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819d-ab25-e7183f11e62c",
        "parent": "データを削除するときは`DELETE` を使います。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814e-97b7-d8dfa7fe4395",
        "parent": "`FROM テーブル名`で、どのテーブルかを指定します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8185-a8af-c6e5a71a1f34",
        "parent": "`WHERE 条件`で、どの行のデータを削除するかを指定します。\n`WHERE`句がなければ、テーブル内のすべての行のデータが削除されてしまうので、基本的に必ずつけるようにしましょう。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8194-8565-d009f3aea854",
        "parent": "## 実際にデータを削除してみよう",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-814d-94b8-d894f1513f47",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8179-8347-cdecda8f2150",
        "parent": "「[**データの保存(Create)**](/19d2297f7a72819d8eccded1c97afcc0)」で保存したデータを削除してみましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-812a-bfbb-e0a259b77761",
        "parent": "新たにdelete.pyというファイルを作成してください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8132-b694-e28c3edf275c",
        "parent": "delete.pyの内容を以下のようにしてください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81f4-a76a-d094960c0eeb",
        "parent": "> delete.py  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# データを削除する  \n> cur.execute('DELETE FROM person WHERE id = 1')**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-816b-a32b-e4140c191940",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# データを削除する\ncur.execute('DELETE FROM person WHERE id = 1')**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ea-a5ae-c3bb7bb37692",
        "parent": "delete.pyを実行してください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81d0-89e3-cce1f95a756d",
        "parent": "TEST.dbの内容が以下のようになっていれば削除に成功です。",
        "children": []
      },
      {
        "type": "image",
        "blockId": "19d2297f-7a72-8143-92a8-e67bce0f42dc",
        "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-12_10.53.42.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/f1d6ce41-8656-4ab1-848f-d56b2bc6fce0/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-11-12_10.53.42.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466ZASOWDYF%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063759Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJGMEQCIChBdDFHQaylRbXKDUGhBBjzpv0ZNcPyV4je%2FaGqiyf0AiBTJ8s2wiRP1Y35wNibziK3KjqvRGFQAoOdQlSoyMEpHCr%2FAwhwEAAaDDYzNzQyMzE4MzgwNSIMk7SHlrQSJVXneWRxKtwDz25OVQdaHiY0DcuIMX1JnxZjUmQ4kxHrRaZ%2FwBHKpiaPJ1OGFfnO8aYrzJLPA0DGKwCApl%2F7u1Z34rDIP%2FyWphZsw%2FjcF0ucZoGJwVLd6IWsLGhBMp%2F9v%2FxqNFkx8sLYvjOYfzCx3ltHMhGqMEF65epn2jNajwwPABIGennokK0KzcOc0SvXUwfxhNS%2Fhl%2BnP0E9CWTehVzMqFmj1uiczhtACWrsCFRvWzs7CjWXrIBHEz8AghBziSWTGLs9D5hOXiWPZOw1HD%2B%2FAEqYGVaxnRnDAwHvL0YhajQmXT7RFz%2FHFnSs3RXnbUmUpkUN5Z4%2FhqIzWu8Q9NKPCUFBCTIfGo7OleIXeMS278mtmlYGY1VKQ8lqFS3qLQgRiYzaGAQYUHrHm61nDNNa1oQpd8HaFoJRstgsv3Ovn204UFi%2BRgJekwMkFkgB6a2bRD2aYFuUKbqBwATwOxdvlD81%2BDLCKTw%2F8Qnj5g5bt4Y%2BBXvObzE2XOkdvZk%2FbOYm%2FFjnmsB0W2pTyqsTJifpNJwRUX6cpCG%2FrUGNV4lKQp9magz5qN1fHXLn79CgrhdugCm%2BiefpgZHcpwqvHWMoLLU%2BzAWRIHztvkifsCFsOpHsTBQNVwlgcvZFz58SKMUFVrkwjK%2FLvQY6pgFqjo8gVvtwVWBauSnJY4JWWunyNSru5HsfgIY8ge%2FxIcHIarx2u5TnDpKKn6ZlVmZ9ySI4Cca0tEPg6veyMOe35PImNWnRi7YUbiOTcXBGHoRgvlgarnp2dFFlm2WezVJYD%2FTmgIarM%2BvmArGyFSQzjm%2Fc8aCUSW%2Bh2oS%2FPEI9oNYBtWi%2BYkeakTuEdY%2FlZ01cpmS8f3FF9ZvbSGUyhGZmPgi%2BDgl6&X-Amz-Signature=803854d25b47ddf8ff167fbb072030c310308a3acaa2954358672e6a186875b8&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8155-9b87-e4a0bbe20109",
        "parent": "コードを見ていきましょう。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e1-943d-e2b748befad6",
        "parent": "SQL文は以下のようになっています。",
        "children": []
      },
      {
        "type": "code",
        "blockId": "19d2297f-7a72-81d0-9e6c-ca865e92f072",
        "parent": "```sql\nDELETE FROM person WHERE id = 1\n```",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ce-aaa6-ef1e8ef9c2ab",
        "parent": "`DELETE`でデータを削除することを示しています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814d-a714-c7d361d34e62",
        "parent": "`FROM person`で、対象がpersonテーブルであることを示しています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81da-ad87-fcf71e920899",
        "parent": "`WHERE id = 1` で、対象が`id=1`の行であることを示しています。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81d4-ab50-e854af63c637",
        "parent": "## 任意のデータを扱う",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8115-ae2a-cc0f35f02069",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819d-8662-db4c7f4768af",
        "parent": "データの削除をより実用的に扱う場合、任意の行のデータを削除できる必要があります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8172-9788-eec07b431269",
        "parent": "任意の行のデータを削除する方法を見ていきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-819d-86d6-f1141c72e817",
        "parent": "> 例：任意のidの行を削除する  \n> ```python  \n> cur.execute('DELETE FROM テーブル名 WHERE id = ?', (削除したい行のid,))  \n> ```  \n>   \n> 🛑 `cur` = `cursor`オブジェクト",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81f3-b6fa-e96903288df3",
            "parent": "```python\ncur.execute('DELETE FROM テーブル名 WHERE id = ?', (削除したい行のid,))\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-810b-8faa-caaea6b0c4ef",
            "parent": "🛑 `cur` = `cursor`オブジェクト",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81f9-8e13-f79c4ce8beca",
        "parent": "例えば、personテーブルで、任意のidの行のデータを削除したければ、以下のようなコードになります。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-810c-a350-eb123b913fda",
        "parent": "> personテーブルで任意のidの行のデータを削除する  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> **# 任意の値を入れる  \n> target_id = 1  \n>   \n> # データを削除する  \n> cur.execute('DELETE FROM person WHERE id = ?', (target_id, ))**  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8117-b8a8-f6a5633df124",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\n**# 任意の値を入れる\ntarget_id = 1\n\n# データを削除する\ncur.execute('DELETE FROM person WHERE id = ?', (target_id, ))**\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8191-9427-ebf3eccedb34",
        "parent": "このコードでは、`target_id`の値によって、任意のidの行を削除できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8164-bf26-c2ee97de0c1b",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813e-8b17-cf4ea8761712",
        "parent": "次→[**テーブルの編集**](/19d2297f7a72815c8bd9df9b6d31f648)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8050-8950-d30225ec0b9d",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-815c-8bd9-df9b6d31f648",
    "parent": "## テーブルの編集",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813e-a3cf-cd6fd697934c",
        "parent": "今回は、既存のテーブルを後から編集する方法を説明します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81b9-bf37-ddd7256f4dd5",
        "parent": "## テーブルの編集方法",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81d3-a856-fdebba378396",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81be-862a-c27062cfe078",
        "parent": "テーブルを編集する方法を見ましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8155-b26b-c95126b521e5",
        "parent": "> テーブルを編集するSQL文  \n> ```sql  \n> ALTER TABLE テーブル名 編集内容  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8140-a6d7-c878be375a95",
            "parent": "```sql\nALTER TABLE テーブル名 編集内容\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8110-b760-f63b51c1f219",
        "parent": "テーブルを編集するには、`ALTER TABLE`を使います。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8115-935a-c44db9159e3f",
        "parent": "編集内容の部分には、カラム名の変更、カラムの追加、カラムの削除のいずれかが入ります。\n順番に見ていきましょう。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8118-bbdf-c94490286f0a",
        "parent": "## カラム名の変更",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8170-b463-da2d0e7a1ccf",
        "parent": "---",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81e8-863d-d26e535b1d52",
        "parent": "> カラム名の変更  \n> ```sql  \n> ALTER TABLE テーブル名 RENAME COLUMN 古いカラム名 TO 新しいカラム名  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81c0-bbe0-ca799f240821",
            "parent": "```sql\nALTER TABLE テーブル名 RENAME COLUMN 古いカラム名 TO 新しいカラム名\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8137-baa2-cd710ef31306",
        "parent": "既存のカラムの名前を変更するには`RENAME COLUMN`を使います。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81c4-ad94-f5a069b5b964",
        "parent": "> 例：`person`テーブルのカラム`name`を`full_name`に変更する  \n> ```sql  \n> ALTER TABLE person RENAME COLUMN name TO full_name  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8144-8f6c-fe74fb997184",
            "parent": "```sql\nALTER TABLE person RENAME COLUMN name TO full_name\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819f-a458-c3d7f7f4129c",
        "parent": "この例では、`person`テーブルの`name`カラムを`full_name`という名前に変更します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-816d-810a-d15dc62ba2f2",
        "parent": "## カラムの追加",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-815d-857e-eb4144c165e0",
        "parent": "---",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81d5-acc7-e62dd60a219a",
        "parent": "> カラムの追加  \n> ```sql  \n> ALTER TABLE テーブル名 ADD 新しいカラム名 データ型  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-811d-9cab-c76c7c02653e",
            "parent": "```sql\nALTER TABLE テーブル名 ADD 新しいカラム名 データ型\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8172-a2d4-e709ae98e04f",
        "parent": "カラムを追加するには`ADD`を使用します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81de-8dd6-f0d6fd209c57",
        "parent": "> 例：`person`テーブルに`job`カラムを追加する  \n> ```sql  \n> ALTER TABLE person ADD job TEXT  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81a8-aa16-ff6db8f280da",
            "parent": "```sql\nALTER TABLE person ADD job TEXT\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8162-802c-cc1b68a42ada",
        "parent": "この例では、`person`テーブルに、新たなカラム`job`を追加しています。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8143-b831-f9d1f0312e94",
        "parent": "## カラムの削除",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-815b-9f67-c9b0e5817f4b",
        "parent": "---",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-811c-958e-fffea910a345",
        "parent": "> カラムの削除  \n> ```sql  \n> ALTER TABLE テーブル名 DROP COLUMN カラム名  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81c7-995e-d7e90ec17620",
            "parent": "```sql\nALTER TABLE テーブル名 DROP COLUMN カラム名\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-812e-a4b9-d9ea6d780ca7",
        "parent": "カラムを削除するには、`DROP COLUMN`を使用します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8133-919b-d254c54a876d",
        "parent": "> 例：personテーブルのageカラムを削除する  \n> ```sql  \n> ALTER TABLE person DROP COLUMN age  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-814b-9585-cea19f89a157",
            "parent": "```sql\nALTER TABLE person DROP COLUMN age\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81aa-a442-e0167056b02d",
        "parent": "この例では、`person`テーブルの`age`カラムを削除します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816f-8bdc-c6c273bc54fd",
        "parent": "",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8103-89ae-fe016bd12075",
        "parent": "次→[**CRUD操作を使い回せるようにしよう**](/19d2297f7a7281d5b81ad1366e7bafac)",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8141-b0b8-dc2579626ad0",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "paragraph",
    "blockId": "19d2297f-7a72-80e1-bb32-e71db47333a0",
    "parent": "**Section3：データベースを実用するために**",
    "children": []
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-81d5-b81a-d1366e7bafac",
    "parent": "## CRUD操作を使い回せるようにしよう",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8167-a8e9-c2e19c142bdc",
        "parent": "今回は、CRUD操作をする使い回し可能な関数の作り方の一例を紹介します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8169-b6b4-f80e0407aac7",
        "parent": "なお、**今回示す例はすべて、「**[**データベースとの接続とテーブルの作成**](/19d2297f7a728170a321daff5ba9bc0a)**」で作成したデータベースを操作する関数となっています。**テーブルのカラムなどを知りたい方はそちらのページをご覧ください。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8133-b5fa-fb997f1ac6fe",
        "parent": "## 共通の部分",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81fc-829d-c0be09504fe3",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8134-b5c2-d14ee59fcbb1",
        "parent": "まず、CRUD操作はすべて、データベースとの接続が不可欠です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e7-95ac-fb02a246c39f",
        "parent": "ですので、データベースと接続する部分のコードはCRUD操作をする関数の共通部分となります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81d8-972e-f87d44d21561",
        "parent": "「[**データベースとの接続とテーブルの作成**](/19d2297f7a728170a321daff5ba9bc0a)」においてすでに紹介しましたが、改めてデータベースと接続するコードを見ておきましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81cb-b59b-c3f6d60d301a",
        "parent": "> データベースと接続するコード  \n> ```python  \n> dbname = 'TEST.db'  \n> conn = sqlite3.connect(dbname)  \n> cur = conn.cursor()  \n>   \n> conn.commit()  \n>   \n> cur.close()  \n> conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81a0-a684-e739e73b8935",
            "parent": "```python\ndbname = 'TEST.db'\nconn = sqlite3.connect(dbname)\ncur = conn.cursor()\n\nconn.commit()\n\ncur.close()\nconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-818f-938e-cdb3e8249a40",
        "parent": "このコードがCRUD操作をする関数の共通部分となります。`conn.commit()`がデータベースへの操作を確定する部分となるので、その上にデータベースを操作するコードを付け足すことになります。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81a6-918f-cdc0e9b43e00",
        "parent": "## データの保存",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81de-8ca4-e223781089a6",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ed-a913-ea38d453ba03",
        "parent": "データを保存するための使い回し可能な関数の一例を示します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8103-80b6-cba8d52f6100",
        "parent": "> データを保存する関数  \n> ```python  \n> def insert_data(name, age, gender):  \n> \tdbname = 'TEST.db'  \n> \tconn = sqlite3.connect(dbname)  \n> \tcur = conn.cursor()  \n> \t  \n> \tcur.execute(**'**INSERT INTO person(name, age, gender) VALUES (?, ?, ?)', (name, age, gender))  \n> \t  \n> \tconn.commit()  \n> \t  \n> \tcur.close()  \n> \tconn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81d1-b43f-f8efa7c4759a",
            "parent": "```python\ndef insert_data(name, age, gender):\n\tdbname = 'TEST.db'\n\tconn = sqlite3.connect(dbname)\n\tcur = conn.cursor()\n\t\n\tcur.execute(**'**INSERT INTO person(name, age, gender) VALUES (?, ?, ?)', (name, age, gender))\n\t\n\tconn.commit()\n\t\n\tcur.close()\n\tconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8187-ac65-c357072497ec",
        "parent": "この関数では、引数として受け取った`name`、`age`、`gender` の値が、それぞれのカラムに保存されるようになっています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8188-8cf7-d25e8db71d0e",
        "parent": "この関数は以下のように使用できます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-812c-bc25-dd1be82cf5f7",
        "parent": "> `insert_data` の使用例  \n> ```python  \n> insert_data(\"Jeido\", 40, \"Woman\")  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81ed-addc-f71d99273f16",
            "parent": "```python\ninsert_data(\"Jeido\", 40, \"Woman\")\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816f-9f1e-e43c4e61d835",
        "parent": "これで、カラム`name`に`”Jeido”`、カラム`age`に`40`、カラム`gender`に`”Woman”`がそれぞれ保存されます。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-813e-b00a-da1736195e37",
        "parent": "## データの取得",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-813b-bbac-f435ab0e907a",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8116-abe4-ffba72441577",
        "parent": "データを取得するための使い回し可能な関数の一例を示します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81e7-b233-f5b9d8419e4f",
        "parent": "> 任意のデータを取得する関数  \n> ```python  \n> def get_data(id):  \n>     dbname = 'TEST.db'  \n>     conn = sqlite3.connect(dbname)  \n>     cur = conn.cursor()  \n>   \n>     cur.execute('SELECT * FROM person WHERE id = ?',(id,))  \n>     data = cur.fetchall()  \n>   \n>     conn.commit()  \n>   \n>     cur.close()  \n>     conn.close()  \n>   \n>     return data  \n> ```  \n>   \n>   \n>   \n> すべてのデータを取得する関数  \n>   \n> ```python  \n> def get_all_data():  \n>     dbname = 'TEST.db'  \n>     conn = sqlite3.connect(dbname)  \n>     cur = conn.cursor()  \n>   \n>     cur.execute('SELECT * FROM person')  \n>     data = cur.fetchall()  \n>   \n>     conn.commit()  \n>   \n>     cur.close()  \n>     conn.close()  \n>   \n>     return data  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8136-94c1-f78f55ab967f",
            "parent": "```python\ndef get_data(id):\n    dbname = 'TEST.db'\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n\n    cur.execute('SELECT * FROM person WHERE id = ?',(id,))\n    data = cur.fetchall()\n\n    conn.commit()\n\n    cur.close()\n    conn.close()\n\n    return data\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8109-8f2f-da7f81137b21",
            "parent": "",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8142-a1b0-f5b5978da050",
            "parent": "すべてのデータを取得する関数",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81c2-a45e-d0a4903360c0",
            "parent": "```python\ndef get_all_data():\n    dbname = 'TEST.db'\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n\n    cur.execute('SELECT * FROM person')\n    data = cur.fetchall()\n\n    conn.commit()\n\n    cur.close()\n    conn.close()\n\n    return data\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c8-b793-fb4e202b8641",
        "parent": "`get_data` は引数の`id` の値でどのidの行を取得するかを指定できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e6-9e16-fdaef9d4da57",
        "parent": "`get_data`と`get_all_data`の戻り値は、それぞれ取得したデータのリストです。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-814e-bd98-eda853d412c2",
        "parent": "> `get_data`の使用例  \n> ```python  \n> # 一行目のデータを取得する  \n> print(get_data(1))  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8158-bedf-c8930555074a",
            "parent": "```python\n# 一行目のデータを取得する\nprint(get_data(1))\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8185-852d-d5821d9a9fae",
        "parent": "## データの編集",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81a7-a48c-f944b3fed392",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819c-8e75-d1be6d8c17f0",
        "parent": "データを編集するための使い回し可能な関数の一例を示します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81da-860f-d71e13d56e8f",
        "parent": "> データを編集する関数  \n> ```python  \n> def update_data(name, age, gender, id):  \n> \tdbname = 'TEST.db'  \n> \tconn = sqlite3.connect(dbname)  \n> \tcur = conn.cursor()  \n> \t  \n> \tcur.execute('UPDATE person SET name = ?, age = ?, gender = ? WHERE id = ?', (name, age, gender, id))  \n> \t  \n> \tconn.commit()  \n> \t  \n> \tcur.close()  \n> \tconn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8165-a19f-dd50edd61c03",
            "parent": "```python\ndef update_data(name, age, gender, id):\n\tdbname = 'TEST.db'\n\tconn = sqlite3.connect(dbname)\n\tcur = conn.cursor()\n\t\n\tcur.execute('UPDATE person SET name = ?, age = ?, gender = ? WHERE id = ?', (name, age, gender, id))\n\t\n\tconn.commit()\n\t\n\tcur.close()\n\tconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816f-afdd-c5b4fbc02d4f",
        "parent": "`update_data` は、引数の`name`、`age`、`gender`が、それぞれのカラムの値となっており、引数`id`の値でどの行を編集するか指定できるようになっています。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8123-88e0-d28d2433e3f3",
        "parent": "> `update_data` の使用例  \n> ```python  \n> update_data(\"Watanabe\", 32, \"Man\", 1)  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8111-9241-f99088aa1793",
            "parent": "```python\nupdate_data(\"Watanabe\", 32, \"Man\", 1)\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ec-a0c7-d09a5ab257ce",
        "parent": "これで、一行目のデータを、カラム`name`を`\"Watanabe\"`に、カラム`age`を`32`に、カラム`gender`を`”Man”`に編集できます。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81dd-8dc4-e9ab9467c128",
        "parent": "## データの削除",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-8175-9552-f90e07b37fdd",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8135-85f3-d27c740b2b6a",
        "parent": "データを削除するための使い回し可能な関数の一例を示します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8157-b41a-ded3869e0936",
        "parent": "> データを削除する関数  \n> ```python  \n> def delete_data(id):  \n> \tdbname = 'TEST.db'  \n> \tconn = sqlite3.connect(dbname)  \n> \tcur = conn.cursor()  \n> \t  \n> \tcur.execute('DELETE FROM person WHERE id = ?',(id,))  \n> \t  \n> \tconn.commit()  \n> \t  \n> \tcur.close()  \n> \tconn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81ca-9ee9-c00fbc26f758",
            "parent": "```python\ndef delete_data(id):\n\tdbname = 'TEST.db'\n\tconn = sqlite3.connect(dbname)\n\tcur = conn.cursor()\n\t\n\tcur.execute('DELETE FROM person WHERE id = ?',(id,))\n\t\n\tconn.commit()\n\t\n\tcur.close()\n\tconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8176-a91f-c37348b735b6",
        "parent": "`delete_data` は、引数`id`の値によって、どのidの行を削除するかを指定できます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8114-a8f7-e500472e7395",
        "parent": "> `delete_data`の使用例  \n> ```python  \n> # 一行目のデータを削除  \n> delete_data(1)  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8149-add2-fd4ee61c4ac5",
            "parent": "```python\n# 一行目のデータを削除\ndelete_data(1)\n```",
            "children": []
          }
        ]
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-812d-bffe-f90403d06872",
    "parent": "## マイグレーション",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-815e-9c5e-df25377300da",
        "parent": "今回は、データベースにおける「マイグレーション」について説明します。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-81fa-840e-ca22f44198da",
        "parent": "## マイグレーションとは？",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81b7-a7c1-c3c295d825dc",
        "parent": "---",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-813e-bc52-d4f934fd7185",
        "parent": "### 概要",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-813b-8dc9-e711b6ce6103",
        "parent": "データベースにおける「マイグレーション（migration）」とは、データベースのスキーマ（構造）を変更する処理を指します。例えば、新しいテーブルの追加、既存のテーブルへのカラムの追加や削除、データ型の変更など。要するに、既存のデータベースの構造を後から変更したい時に、いつでも変更できるような仕組みがマイグレーションです。",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-81b6-aed5-e1a0ad42dc81",
        "parent": "### マイグレーションの流れ",
        "children": []
      },
      {
        "type": "numbered_list_item",
        "blockId": "19d2297f-7a72-81f4-8e07-ef27c4c215ea",
        "parent": "1. **スキーマ（構造）の変更**: 開発者が新しい機能を実装するためにデータベースのスキーマを変更します（例えば、新しいカラムを追加するなど）。",
        "children": []
      },
      {
        "type": "numbered_list_item",
        "blockId": "19d2297f-7a72-8196-8844-cb15d98dddfe",
        "parent": "2. **変更内容を記録するファイルの作成**: 変更内容を記録するファイル（マイグレーションファイル）を作成します。このファイルには、データベースの変更方法が記述されています。",
        "children": []
      },
      {
        "type": "numbered_list_item",
        "blockId": "19d2297f-7a72-81ad-ab0c-dfc951e3af0b",
        "parent": "3. **マイグレーションの適用**: マイグレーションツールを使用して、変更内容を実際のデータベースに適用します。これにより、データベースが新しいスキーマ（構造）に更新されます。",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-81c7-8b1d-c5d34268ac13",
        "parent": "### マイグレーションのメリット",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8196-bc21-ca9a95c3959a",
        "parent": "- データベースの構造をいつでも簡単に変更できる",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-815b-9c6f-fe934b72d761",
        "parent": "- データベースの中のデータを引き継ぎつつ構造を変更できる",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8131-a7bd-c8c5c632c149",
        "parent": "- データベースの更新履歴が残る",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-819c-8139-fa499ac202fd",
        "parent": "## マイグレーションの仕組みを作ろう",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-810a-86e4-ebb3b7577c0c",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81db-bb62-ebd711974295",
        "parent": "さて、ここから実際にPythonとsqlite3を用いてマイグレーションをいつでも実行できる仕組みを作ってみましょう。",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-81a0-9de5-c6dfeefebbe6",
        "parent": "### フォルダ構造",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811e-9f9c-fb316c1bb128",
        "parent": "まず、今回マイグレーションの仕組みを作成するために以下のフォルダ構造を用意してください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81e5-9485-ebd28a2b67c1",
        "parent": "> フォルダ構造  \n> ![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.01.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/4000a4a9-3194-45d5-99ec-ab7404cea9fe/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.01.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QLVE5AC2%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063818Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIHyQp%2BOL0i4aINulTAcbRMI98xPv0N6gsiZJAQZon4RpAiEArJgElpDACB4gYUUXemtIU%2B9aQezxbdLKQv5MgkCnQKsq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDF7jKFbZUvxKVG%2BGfyrcA7OYUlE9SM69Ki78o1m79fZYfPv%2FoBg4WJEmEMG6xRrDlcoK6CSIzGKlbA2dMhtF8Fmjzfq8Ub2%2F1oWlf%2FtBDdaSTF1EDtSP%2BSH6Twv%2FNqgFnPhnVa14eh5muRytv6tTQ7hhQ223b3kO%2B0dhmv9Qp7bJQxDxyfxSrBZPwuSvYkifYjy8fQ5rh1rO4jChO8zk9i7wMK762omiOBl5udHVGO%2F0TSLjx4Lbm4pNeLduzvsnTTSM2E3%2BSAEr%2FErJP922hWykrW4HfmbKv0h2XzxgIZw%2BsGHLZ8J%2FJG87fnvMEW5rwl0uji2Utc3ww%2FZ2ZV8SJok91r02ctlEyGad2Z3CyNf%2FSd25hvyIwvyuq2BAjtXKlI9t0RjBn7S2c9rLN6sUSrQQAGALfvwEjjbK4dTONPMwLfOZcModi%2FYu%2BegOxAgG145ihUurvjKBkl%2F9C4qO%2BsKVhl1ylrUutS5m7f8%2BcaDo%2FqQuK18XWv%2FCocxVl4uxVUBp1S5QDgNlCVBxu8KtEZBFTsNXaV0B9dMhDXAttINuN%2Fi6JeqjQgpcC5reGntlp5hdP7Jt3gsGd9wtK1u6lSuxNg74Tymg9c4M1WI9VzGBMSFF0C4TY0S1Ita3kG2iBujZtCKhX13HAP%2FZMJuvy70GOqUBU2JzyGPoi9Jn%2B%2Bv2RQIYphYK6bEVT%2FhEA5NS1d3n3APXXbd5Dx9ExqH6TnRRU0KVbl%2BeQbpk8Nc43YfeAnhXtVXgPQDpvWr%2B8vdzgt1ZzrmCkaTP5fIIrcaA3Uysm9BrTATcIGSZ4vDAUBfTv5RsBIDDXMi8e6uoPHnqGT922CDTbXnoVjPl5ya2O2TkvqIUIFXtHkUPVaNIJLTlP3cijmmdV1PH&X-Amz-Signature=cd9bfb3da8715ae974943c5899383b77fd404d5afa4cb013d6dd4964380f008a&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": [
          {
            "type": "image",
            "blockId": "19d2297f-7a72-814e-860d-cae54ff227fe",
            "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.01.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/4000a4a9-3194-45d5-99ec-ab7404cea9fe/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.01.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4667ETV45ZW%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063818Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIQCX578O4k4wsvX7o7d8O63UgUwLq36hgX7twzLOflfxZAIgc9Lj%2BDDRg04AAgCSjCJaZrhD7uwkidfhofrRBVK6TQEq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDB1GErateiNIHt5OFSrcAzAZY1PiM71mhpMybY4YrIA6r5%2BlEWY%2BaSyPwp4a3sGq9ys6AiZBiT8KbohcUhMM9BKe%2BWeggm%2BbCUU4oZVHoAc46n7iLVFdM%2Fhg%2BXKCot3%2FE7FRZeI5yvykud2r2fT1mHuxg8MfT0Ut0PQrqzLlK5evT2aAe4TgY5KP1MV2ay0CvgK5j1rpjcL73TLUO%2FvfksoYqQn0TiAhALIuCMsulj72X0qcQG9293%2FGekaGzPdjpLSqVIPe1G9pYGLovWYc8DCptAz2aaVMRWfj4x8%2BXbKLNZ4qTHkyKjEJaj2bqhEKlRtvn1nXl%2BUSKyMPWXFWE5XXfAo1CO7VgMSAcwT6kd8xT4P9%2Bs%2F5pROYNUTjvCYatuK5YurjiksQc73sxHuxdc99wlkUttc6%2B8ub5opAhNuXLWJk5arqGHAA433EDwt5u8udvXqqpE4ilUb8bsjrnWk9fR3CN5i6Fz8BW%2FYtZfDc4LMl2KKxXCNb2whGDbFg1Q7wXa4S%2Fm1in%2BtnbVWpgY2OTHpl0eHIkJRIlRaztok6eFE6N9ldLhsv7k0HhhnAtG30PePD%2FDkHi%2FGyClRlg%2FxCFiAwm3eGiPWcybs0LW3YaOov4hd1MaJ%2BgvGoOxYiAKat%2FdTYgjHUPhk%2FMJ2vy70GOqUBA%2FwHqgtz0meIQPyo5F3Zve8ILd0kugVQVpclUbnmucwvra0wt9XfMAN%2BKrENAFWz5pBpFOWqQYy9edX7nTb%2Fo0hlEX1Q56mGKRSxtouZPngVF1zndvdfeDHvPUG1WlQIcyrjsApIvOWLj6uUGwHgG%2FA30pAHdwRr8B9ATyRLkTZRZzV2cU%2BY92sSCzFUGsnk39SfLHK65KPcWc%2FZtobBQxas%2F9ZB&X-Amz-Signature=766458b8bf981a899082be133ab385e2b7b2fd25931f4da354d680978e47f731&X-Amz-SignedHeaders=host&x-id=GetObject)",
            "children": []
          }
        ]
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81ad-9f65-c20913cb3550",
        "parent": "- `migration_test/` （今回のルート[根っこの]フォルダ）",
        "children": [
          {
            "type": "bulleted_list_item",
            "blockId": "19d2297f-7a72-812c-9a92-e5f8b8b9e7ed",
            "parent": "- `apply_migrations.py` （マイグレーションを適用するための実行用ファイル）",
            "children": []
          },
          {
            "type": "bulleted_list_item",
            "blockId": "19d2297f-7a72-81cf-94f1-f8b586b9f160",
            "parent": "- `migrations/`　（マイグレーションファイルを格納するフォルダ）",
            "children": []
          },
          {
            "type": "bulleted_list_item",
            "blockId": "19d2297f-7a72-8155-9965-c1abbd35c2bc",
            "parent": "- `create_migrations_table.py`　（マイグレーションテーブルを作成するスクリプト）",
            "children": []
          },
          {
            "type": "bulleted_list_item",
            "blockId": "19d2297f-7a72-815e-aca5-ed58625c47f1",
            "parent": "- `TEST.db`　（データベースファイル）",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-8126-a8f1-fd5f23869715",
        "parent": "### データベースとマイグレーションの設定",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81d9-bcda-eab8876ce7c0",
        "parent": "まず、適用済みのマイグレーションを保存するために、データベースに`migrations`テーブルを作成します。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8154-bec4-f60cd4563fb3",
        "parent": "> `migrations`テーブル  \n> | カラム名  | id                                | migration_name | applied_at                          |  \n> | ----- | --------------------------------- | -------------- | ----------------------------------- |  \n> | 属性    | INTEGER PRIMARY KEY AUTOINCREMENT | TEXT UNIQUE    | TIMESTAMP DEFAULT CURRENT_TIMESTAMP |  \n> | 保存する値 | 一意の値                              | マイグレーションの名前    | いつ適用されたか                            |",
        "children": [
          {
            "type": "table",
            "blockId": "19d2297f-7a72-8140-afd8-fd68d83c1105",
            "parent": "| カラム名  | id                                | migration_name | applied_at                          |\n| ----- | --------------------------------- | -------------- | ----------------------------------- |\n| 属性    | INTEGER PRIMARY KEY AUTOINCREMENT | TEXT UNIQUE    | TIMESTAMP DEFAULT CURRENT_TIMESTAMP |\n| 保存する値 | 一意の値                              | マイグレーションの名前    | いつ適用されたか                            |",
            "children": [
              {
                "type": "table_row",
                "blockId": "19d2297f-7a72-81bc-8451-dbe4b1bb8794",
                "parent": "",
                "children": []
              },
              {
                "type": "table_row",
                "blockId": "19d2297f-7a72-81ff-9e24-e29a1558261c",
                "parent": "",
                "children": []
              },
              {
                "type": "table_row",
                "blockId": "19d2297f-7a72-819e-970a-ed284d12bc0b",
                "parent": "",
                "children": []
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8144-800a-d8d2533d61a2",
        "parent": "`create_migrations_table.py` に、以下のコードを記述してください。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81d9-9184-d5750bf53ead",
        "parent": "> `create_migrations_table.py`  \n> ```python  \n> import sqlite3  \n>   \n> def create_migrations_table(dbname):  \n> \tconn = sqlite3.connect(dbname)  \n> \tcur = conn.cursor()  \n> \tcur.execute('''  \n> \t\t\tCREATE TABLE IF NOT EXISTS migrations (  \n> \t\t\tid INTEGER PRIMARY KEY AUTOINCREMENT,  \n> \t\t\tmigration_name TEXT UNIQUE,  \n> \t\t\tapplied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)  \n> \t''')  \n> \tconn.commit()  \n> \t  \n> \tcur.close()  \n> \tconn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8178-9ca9-e788ab5cd40e",
            "parent": "```python\nimport sqlite3\n\ndef create_migrations_table(dbname):\n\tconn = sqlite3.connect(dbname)\n\tcur = conn.cursor()\n\tcur.execute('''\n\t\t\tCREATE TABLE IF NOT EXISTS migrations (\n\t\t\tid INTEGER PRIMARY KEY AUTOINCREMENT,\n\t\t\tmigration_name TEXT UNIQUE,\n\t\t\tapplied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)\n\t''')\n\tconn.commit()\n\t\n\tcur.close()\n\tconn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8150-9152-f609f377b25a",
        "parent": "テーブルを作成するSQL文が、`CREATE TABLE IF NOT EXISTS テーブル名`となっています。`IF NOT EXISTS`がない場合、既にテーブルが作成されていれば、`table already exists`というエラーが発生します。既に存在するテーブルを作成しようとするとエラーが発生するわけです。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8139-9dc7-f6829fcaa22d",
        "parent": "したがって、`IF NOT EXISTS`があることで、テーブルが作成済みでない場合のみテーブルを作成する処理が行われ、エラーを回避できます。",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-814c-adce-e61a70184828",
        "parent": "### **マイグレーションファイルの作成**",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811b-8984-c47c5b0c4325",
        "parent": "最初の`migrations`テーブルの作成以外で、データベースの構造を変更したい場合は、全てマイグレーションファイルに記述することが望ましいです。（なぜなら、そうすると全ての変更履歴が残るからです）",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8129-9e6a-f07db9fd0955",
        "parent": "マイグレーションファイルを `migrations` フォルダ内に配置します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81af-b5d2-d57bd0519b1b",
        "parent": "**ファイルの名前**",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8145-9aa8-ee4b93a0d08a",
        "parent": "マイグレーションファイルの名前は一貫性を持たせることが望まれます。\n次のような名前にすることが一般的です：",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81a9-99f6-ef5256c10ee4",
        "parent": "- `連番_変更内容`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-816c-a425-c2e77396dafa",
        "parent": "例えば、最初のスキーマ（構造）を規定する`001_initial_schema.py`や、emailカラムを追加する`002_add_email_column.py`や、userテーブルを追加する`003_add_user_table.py` など。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8199-8cc0-e06d8e574bc8",
        "parent": "ファイルの名前にこのような規則を持たせることで、どの変更をどの順番で行ったのかがいつでも確認できるようになります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8126-b6a1-e856758300ef",
        "parent": "**ファイルの内容**",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81bd-817a-de74afd98b7b",
        "parent": "マイグレーションファイルの内容は、データベースのスキーマ（構造）を変更するSQL文を実行する処理となります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b2-835b-e3c20cf0c651",
        "parent": "例えば、新しいテーブルの作成、カラムの追加、カラムの削除、など。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8199-9c54-ce48931427ce",
        "parent": "**ファイルの作成**",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-814d-bab0-f342b5994525",
        "parent": "今回は、`migrations` フォルダ内に`001_initial_schema.py`と`002_add_email_column.py`を作ってみましょう。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81fb-842f-cd0bc50186b9",
        "parent": "> フォルダ構造  \n> ![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.35.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/1874a4c5-dcca-4a9e-8886-d23eff0489dd/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.35.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB46623ELJRKW%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063822Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIFgEhuPuC%2FFM%2FTO%2BUZv9rKlWrRZFMvJWds0V7hLMF9jwAiEA1ORZRWg5%2By3Wj7U8ArH%2Btpw4s8b7R%2FSBmmh1acdJD%2Bcq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDPDCJpH0Wv1BSMWlbCrcAwLZx9Y19Yr5fGhnJGGr5pJfNnT838nJSAtn64mJsdrfgZ2mvxyAso2h7VpeBkRofO1RjwwxT8QAc5BrO%2B4TMYaQtmfR2A94B2JqvCXyBeHqgFhQFaTn7D4u6maiZuyRDORt%2Fe2iXfysj%2FiZYNZRH9uAvkE1vaf7ZK63korFvZj%2FE9hQcrso6k7hiRurrhvG4926HUwIoiQMi1hFYPClLJlmsADvv5ruYpjr3Y8oTGNbFAIt%2FO2%2BKzHZy6PFJgLDjSLnCe129OVRq405MAFDKf2roQ3d5kAJG7ZmKX0Sht%2BJnlYx5M9L21Qe5zEpGF3aWVn7ir071SIuH%2BIIDGemHmGz7qmmwMUcVrgelFqVc%2FtbltK5IP7vPV4XR6ue%2B5L1P1lCotr4DH55Y2o%2BhUNhj8ECSRCoU%2FaKHAgYrOXrZNt452MgDzW7rT%2B%2FUvO5Vja3pejZuFtasiBK3xB3%2FH3UOqXp4b8ifXtIgTrAv%2FIheJbj4l%2FJaImGh%2FUjXpCQqllZldNDRECp%2BAg7A8s9sYoPeH8CHzU9JVOL38ntEOsGJOV61BrORJ2BsN1iTDb1W6QPfauLrTSpsx9DpU3gH3B4jVlkB9QMoOaMriZgBUg0pqyraQpAy9mzIRB33EHJMKKvy70GOqUBg3hyF07VgWvIYc82SKv%2FkG2K57c72D0T%2FK4vKVK64kVIsGLgN1%2Fe0i%2FV1Kotd2IdFxz9zeTHlaWVSFydLb86vRi7TFykoTLDCK%2B8X%2FaTyM1IYTmBiBZ3oNlZbE1Zuo0UuD227Jh8taSiSVXt0u5iwFknD4Do5kxg2vWiqsrtf1ebu0euH1RDIF%2BegWC8A3QPHtK2fFk4KRzzxgumIbXIaBO2qhS1&X-Amz-Signature=98be22c7b3c6e4ca64c21de095e7214ffc3afc8f2f979c368c13578d85acc6e2&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": [
          {
            "type": "image",
            "blockId": "19d2297f-7a72-81b6-94e4-d7666d1897ca",
            "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.35.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/1874a4c5-dcca-4a9e-8886-d23eff0489dd/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_15.33.35.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB46643JSSFYT%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063822Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIQCtWqG9S2gUGOL0ZcfRQqAJ63vUpjv3LFC1%2Fw6T42AfGwIgPARfLTtJEwZfb9Udp%2FiQXdeZRtXOL7DcUhbuFVtNySUq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDCJ%2FfFS5ZX%2B7%2BrqNhircAzqx%2BleaSm0epqhCcfcSCuCbIKS%2BNKThDXKzmYzjvQWtJ7l%2F%2FTaH6k%2FfBTtgplX%2F46vUTKVCwZswLRgKieGH6eZKD81YlMhAdzsQKbzNFWiXo%2FYeVNdhUVTQ%2FP22mn8lrf3TyypAKRod0keVeWXWyfOPES%2B4soj6bXhgzlmi7k6c853slb%2FgawgslIrfbFmjIbTMzznyZO3QMHQCosAk1tcPg3UcEnYNrcsu0zeUKDAPIhB6UHMViNi5RIvFcpu71%2F0xM%2B%2BhEDdEiU5lgu9tkyqkb%2B02ZVHOuTWsBMxqMdlftv2WzIpMAifTpDGCLbsg1%2FyQInYhSJXAp1ERKlRw0%2BdSHErMZCQSYOi2Z4E5Mm0u0oYLKUeXuwILWwNZrH89uh5t0bZHOb4Erdqw3EovrNNzoDJhbsQvS%2BhcVX9%2FdWcHs05mS1dFZoQV37tAw8qiu6R0LMGDkl6zK1pq6nF78myW3MwGNDrZRwgzJXaNqINabghrvQ2sWjgUjxGjJp2dNFRExzXY4et0DzZ6ps7BNUxzw6yF7Skbks%2FCPTc6gl1ym0MxolxTOy5wAMe7VdP1%2F7JJ8wb0wkJGpfwpWJNt82UezOOo6qmiIpI5sqkyiDKD6sfDgsvU8UpJeBdRMI%2Bwy70GOqUBrogEsw3J2Oh7IYZZVujNaoGWXGnQf6rPJTsFPmIW7EOapO1IERR3iBQQKJAQNNH%2BKwyGCvyXb%2BVxOhVZFmDTgO4V6qLBZQCt9kZ9DXjqkL%2F8CNxT9rcGMoGsq6WAQtaH8qHJabPHF4UxB6nEZLPN0%2FtVKxj4jUFxcMEpXVG9MOZUOgwQDk6bdFxCQmrs%2BIrSj8o4%2FKsxrlnu%2BABzKgjpR6ogio8Z&X-Amz-Signature=8aeda360db687222535cc7eeb150ef4238f34590ad7b349a498c0337be850bd0&X-Amz-SignedHeaders=host&x-id=GetObject)",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8196-9f1a-ddb06751b252",
        "parent": "以下に二つのファイルの内容を載せます。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-816d-b3d1-e36b297da642",
        "parent": "> `001_initial_schema.py`  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n>   \n> def apply_migration():  \n>   conn = sqlite3.connect(dbname)  \n>   cur = conn.cursor()  \n>   cur.execute('''  \n>     CREATE TABLE IF NOT EXISTS users (  \n>       id INTEGER PRIMARY KEY AUTOINCREMENT,  \n>       name TEXT NOT NULL)  \n>   ''')  \n>   conn.commit()  \n>     \n>   cur.close()  \n>   conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81b1-9ce8-ee9219dfb04a",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\n\ndef apply_migration():\n  conn = sqlite3.connect(dbname)\n  cur = conn.cursor()\n  cur.execute('''\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL)\n  ''')\n  conn.commit()\n  \n  cur.close()\n  conn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8126-a3e6-de35ac6087bd",
        "parent": "> `002_add_email_column.py`  \n> ```python  \n> import sqlite3  \n>   \n> dbname = 'TEST.db'  \n>   \n> def apply_migration():  \n>     conn = sqlite3.connect(dbname)  \n>     cur = conn.cursor()  \n>     cur.execute('''  \n>         ALTER TABLE users ADD COLUMN email TEXT  \n>     ''')  \n>     conn.commit()  \n>       \n>     cur.close()  \n>     conn.close()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81b4-a6c1-fbc592aca9f2",
            "parent": "```python\nimport sqlite3\n\ndbname = 'TEST.db'\n\ndef apply_migration():\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n    cur.execute('''\n        ALTER TABLE users ADD COLUMN email TEXT\n    ''')\n    conn.commit()\n    \n    cur.close()\n    conn.close()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8150-9743-c33833c6a9e4",
        "parent": "`001_initial_schema.py`では、usersテーブルを新たに作成する処理を記述しています。`002_add_email_column.py`では、usersテーブルにemailカラムを追加する処理を記述しています。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-810e-a0ca-d659edf53d2e",
        "parent": "上記で、今回のマイグレーションファイルができました。",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-814c-ba5c-fb51234c5ba8",
        "parent": "### **マイグレーションの適用**",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8172-b933-e5159a1b6678",
        "parent": "すべてのマイグレーションファイルを適用するロジックを作成します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811e-8c43-cfaa3d8f197b",
        "parent": "定義する関数は二つです。`get_applied_migrations関数`と`apply_migrations関数`です。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811b-bb43-e00f35635863",
        "parent": "`get_applied_migrations関数`：`migrations` テーブルを使って、すでに適用されたマイグレーションを取得する。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811d-bd67-cfdbc58c01c1",
        "parent": "`apply_migrations関数`：`get_applied_migrations関数`を使って適用済みのマイグレーションをスキップし、適用されていないマイグレーションファイルを順番に読み込んで実行する。最後に、適用したマイグレーションを`migrations`テーブルに記録する。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8119-9862-cd5731094b03",
        "parent": "> `apply_migrations.py`  \n> ```python  \n> import os  \n> import sqlite3  \n> from create_migrations_table import create_migrations_table  \n>   \n> # マイグレーションスクリプトのディレクトリ  \n> migration_dir = 'migrations/'  \n> dbname = 'TEST.db'  \n>   \n> def get_applied_migrations():  \n>     conn = sqlite3.connect(dbname)  \n>     cur = conn.cursor()  \n>     cur.execute('SELECT migration_name FROM migrations')  \n>     applied_migrations = [row[0] for row in cur.fetchall()]  \n>     conn.close()  \n>     return applied_migrations  \n>   \n> def apply_migrations():  \n>     create_migrations_table(dbname)  \n>     # 適用済みのマイグレーションを取得  \n>     applied_migrations = get_applied_migrations()  \n>   \n>     # マイグレーションファイルを読み込む  \n>     migration_files = os.listdir(migration_dir)  \n>     print(migration_files)  \n>   \n>     conn = sqlite3.connect(dbname)  \n>     cur = conn.cursor()  \n>   \n>     for migration_file in migration_files:  \n>         if migration_file not in applied_migrations:  \n>             module_name = migration_file[:-3]  # 拡張子「.py」を削除  \n>             # マイグレーションスクリプトをインポートして実行  \n>             migration_module = __import__(f'migrations.{module_name}', fromlist=['apply_migration'])  \n>             migration_module.apply_migration()  \n>   \n>             # マイグレーションが適用されたことを記録  \n>             cur.execute('INSERT INTO migrations (migration_name) VALUES (?)', (migration_file,))  \n>             conn.commit()  \n>     cur.close()  \n>     conn.close()  \n>   \n> apply_migrations()  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-819d-a411-ca8ab0e4b9a1",
            "parent": "```python\nimport os\nimport sqlite3\nfrom create_migrations_table import create_migrations_table\n\n# マイグレーションスクリプトのディレクトリ\nmigration_dir = 'migrations/'\ndbname = 'TEST.db'\n\ndef get_applied_migrations():\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n    cur.execute('SELECT migration_name FROM migrations')\n    applied_migrations = [row[0] for row in cur.fetchall()]\n    conn.close()\n    return applied_migrations\n\ndef apply_migrations():\n    create_migrations_table(dbname)\n    # 適用済みのマイグレーションを取得\n    applied_migrations = get_applied_migrations()\n\n    # マイグレーションファイルを読み込む\n    migration_files = os.listdir(migration_dir)\n    print(migration_files)\n\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n\n    for migration_file in migration_files:\n        if migration_file not in applied_migrations:\n            module_name = migration_file[:-3]  # 拡張子「.py」を削除\n            # マイグレーションスクリプトをインポートして実行\n            migration_module = __import__(f'migrations.{module_name}', fromlist=['apply_migration'])\n            migration_module.apply_migration()\n\n            # マイグレーションが適用されたことを記録\n            cur.execute('INSERT INTO migrations (migration_name) VALUES (?)', (migration_file,))\n            conn.commit()\n    cur.close()\n    conn.close()\n\napply_migrations()\n```",
            "children": []
          }
        ]
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-818b-9800-c6fb34b0dd9f",
        "parent": "`apply_migrations.py`の内容を記述したら実行してみてください。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81bd-80d4-f28161fa6bcf",
        "parent": "`TEST.db`の中に以下のように、`migrations`テーブルにマイグレーションが記録されていて、`users`テーブルが作成されていれば成功です。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-817d-a776-f44dfc380939",
        "parent": "> `TEST.db`  \n> `migrations`テーブル  \n>   \n> ![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_18.38.01.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/d23815f3-5ea7-442e-a0ec-3718e9fed970/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_18.38.01.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XJMVPVYC%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063826Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIE0p5TvD%2FtajJvywNg0fOm7CNGCH19DAZc0fAKUHl2SzAiEAyWek81zs4A8QKxef83rn%2FKj9Xt8n2CtTHefSHjh8VWoq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDKPnYEgLfv5CYHtJvSrcA%2BjcHW9odEaPMdGKsq0lsEJAj7kDl4qlIJ%2BdHbqV1mT7d7f3L8BgC0O9J9aaD52eU%2FLTJ5pKWIbEbkHZ8i4MrfkqjRjdTT4RfcGEN5%2BhlOm7yTSuSrXKiXjX4se3DeXTkCdJNXsU4%2F3h%2FLLXu37dayzwRGiGtU4%2F3wRbldk%2FeqGm5fbc6J5slK4HSNSUdxYnV06Em51tzSRCHXqGm2ZPRf6GPqzePgau4ScVIlHzlSkhGw9HM90HrzIUVYKhiG6bDGffjiGaRkzGbVNWlMaJ64c%2BnRJ1jh50Z1VWYI9yewDZXifqtful0FCtWP5Gm6%2BCzyrEEa9jWPFCvJyFASbSxwndxkm6j1NXvh9ZMqHhVu6cFaHLZfFZFtpsBPDTpsu7KZa35EtQGgeQLXhr6S4fWaVJsAf6QWxOg6%2FpQ5uuwuE4Nlqz%2B4kq3fJJYkXuLvaHrtzSYeLv1XirKuNBO8x9PWJ119KxCox3oDqpCgOtDaMrIAp%2BXQTot99gheQUrJdd54hvxguAefSGaGg4Z%2Bgc%2BZIawKUSNgkmcjkKYgLJ8sudo%2B8JymgdjKLFm5ffHOjEMWylxHB%2Bmqrndg6ysEuZiAAaEAvGQF9R4Ts8PZzZKPLFDVpZpWF9BeplReF6MJWwy70GOqUBI8TLtjxcWT%2BXccpTQeI0XLKg9Axa2%2BsMU8nQIs%2Fm5NsqFhbQEwZUIhdFUUkr4tKNHjEnDdVA1fTvgQrUz4S1zvg661b132XfGozIW5QE4lWDDjqY8Ep2X%2BZbCeyNRc6oVGAlXd2By9ejI8w0mVKXQOEt2QMdAY8H25YupzK9Pu3tkw5Cpw6cWC06IuDl5i1GUbd%2FfOs8bV00hOjtcsd%2F8AEFa2bv&X-Amz-Signature=ceef41eafc6ed77be7e5e459e71e655156fdb72cadfff102b1f7ea0095bdb585&X-Amz-SignedHeaders=host&x-id=GetObject)  \n>   \n> `users`テーブル  \n>   \n> ![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-02_9.54.40.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/c77f6e2c-853b-45b4-b122-090b6d142813/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-02_9.54.40.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XJMVPVYC%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063826Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJHMEUCIE0p5TvD%2FtajJvywNg0fOm7CNGCH19DAZc0fAKUHl2SzAiEAyWek81zs4A8QKxef83rn%2FKj9Xt8n2CtTHefSHjh8VWoq%2FwMIcBAAGgw2Mzc0MjMxODM4MDUiDKPnYEgLfv5CYHtJvSrcA%2BjcHW9odEaPMdGKsq0lsEJAj7kDl4qlIJ%2BdHbqV1mT7d7f3L8BgC0O9J9aaD52eU%2FLTJ5pKWIbEbkHZ8i4MrfkqjRjdTT4RfcGEN5%2BhlOm7yTSuSrXKiXjX4se3DeXTkCdJNXsU4%2F3h%2FLLXu37dayzwRGiGtU4%2F3wRbldk%2FeqGm5fbc6J5slK4HSNSUdxYnV06Em51tzSRCHXqGm2ZPRf6GPqzePgau4ScVIlHzlSkhGw9HM90HrzIUVYKhiG6bDGffjiGaRkzGbVNWlMaJ64c%2BnRJ1jh50Z1VWYI9yewDZXifqtful0FCtWP5Gm6%2BCzyrEEa9jWPFCvJyFASbSxwndxkm6j1NXvh9ZMqHhVu6cFaHLZfFZFtpsBPDTpsu7KZa35EtQGgeQLXhr6S4fWaVJsAf6QWxOg6%2FpQ5uuwuE4Nlqz%2B4kq3fJJYkXuLvaHrtzSYeLv1XirKuNBO8x9PWJ119KxCox3oDqpCgOtDaMrIAp%2BXQTot99gheQUrJdd54hvxguAefSGaGg4Z%2Bgc%2BZIawKUSNgkmcjkKYgLJ8sudo%2B8JymgdjKLFm5ffHOjEMWylxHB%2Bmqrndg6ysEuZiAAaEAvGQF9R4Ts8PZzZKPLFDVpZpWF9BeplReF6MJWwy70GOqUBI8TLtjxcWT%2BXccpTQeI0XLKg9Axa2%2BsMU8nQIs%2Fm5NsqFhbQEwZUIhdFUUkr4tKNHjEnDdVA1fTvgQrUz4S1zvg661b132XfGozIW5QE4lWDDjqY8Ep2X%2BZbCeyNRc6oVGAlXd2By9ejI8w0mVKXQOEt2QMdAY8H25YupzK9Pu3tkw5Cpw6cWC06IuDl5i1GUbd%2FfOs8bV00hOjtcsd%2F8AEFa2bv&X-Amz-Signature=f369b087fb937f65b989896e92eeaef1b5152faf7432f5050735980b2e08b064&X-Amz-SignedHeaders=host&x-id=GetObject)",
        "children": [
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81a2-a86d-f1e97a8590ef",
            "parent": "`migrations`テーブル",
            "children": []
          },
          {
            "type": "image",
            "blockId": "19d2297f-7a72-8135-afe5-e740422ac7bb",
            "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_18.38.01.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/d23815f3-5ea7-442e-a0ec-3718e9fed970/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-01_18.38.01.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB46657IUA4JG%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063825Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJIMEYCIQCO1OS3aoEl6I9ysVI3HWkftXgPPgpUgvaUuuSTFNYu1gIhAOc8%2BUQxPxrMwdjXMLoMkoYKbChQHWcEsFi8BCPy73IlKv8DCHAQABoMNjM3NDIzMTgzODA1Igy65NM3Nt9A1fVPThEq3ANbVIVD97TEOGJv6LPaYqyTr%2FsXn3%2B4eoDdLFDCAugFH86iMd5GMV89zT5BWUIKafbXwUPqq1WTZthwkTxMaFgQFhIkb2bRBP3dtYUAzmJN4al7jD6rjtxcU%2Fddmux7DHSelshNZgpIgtS69c%2FxwoGXeCpkbMXbi8Dz3Nhthqhbu8TWtfg1%2F8lzYuPa5Cxy3ZI6K7VxxksIiHOG8YCaeI%2FwjgxDH7dKl1vfYm%2BNPMTahB5m1laXrswnl8sJ5%2BrhnxJsy%2BWt8cTBIsI8Ui7Ku1zbG6m2hnwDYvK14cJ7Ue7MEgSDXWiY371hsIYP9Hw6nxUBvfuIKFQaDgbcFy%2FqRYj%2Fn4ktDRw3y4B3iIjcbthIW9IwUL64%2BZnL9lJ4Ghi6QVAyWsePLFttPtJl3lA1giyw9Cy1oe93iF1PkICMJSfYSRKg2ieSy4GFz9GpxodDD%2FlItY%2FHD6YH99NqSoXGB11NdxqpjOa7lZC1hHEAP%2BDX6c2QXnlqPLVnUdGqsOhonMqXHnriimF6JyOM%2FAuToCofYnIdLPlvVWU3AYQESp%2Bhsbmom6cFU0CF5QKTupNSYSodMSzs3fhU86PbnUwyusojfoQSydDrzkUjx%2Fj8fGlh0xBcL9yo2B8RSyGkmzDxr8u9BjqkAVwybsMu81twaNMvHIvbwlZBmvIQDBVyCy4Etoy6Ij3YGWyC5aoJVUFPA8fn7vws2QKxbqkXjmpx%2BdOeNlqu8jndPfwOD8KriSWiOoDkwBqPzJtSMi%2B%2FHBpdRP%2B2KHS%2BZKGu5wBVGJ8tqFdzSVsZjGP2XhcVp4Q4rQPLDl17LETy4VpIWNWyp5nJJ5FL8HhxXUDwdBcItkIqKDILo92fT9CyxfRr&X-Amz-Signature=8bcba3758d63b698e476eda78a17de79043cd4aa644ce93c7188399fb2a95688&X-Amz-SignedHeaders=host&x-id=GetObject)",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8133-8f6b-c4f7198b1884",
            "parent": "`users`テーブル",
            "children": []
          },
          {
            "type": "image",
            "blockId": "19d2297f-7a72-810c-b6d9-d3a2d44fd560",
            "parent": "![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-02_9.54.40.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f9e367dd-1db7-428f-a2ed-c68a46952d5a/c77f6e2c-853b-45b4-b122-090b6d142813/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-12-02_9.54.40.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB46657IUA4JG%2F20250217%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250217T063825Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEcaCXVzLXdlc3QtMiJIMEYCIQCO1OS3aoEl6I9ysVI3HWkftXgPPgpUgvaUuuSTFNYu1gIhAOc8%2BUQxPxrMwdjXMLoMkoYKbChQHWcEsFi8BCPy73IlKv8DCHAQABoMNjM3NDIzMTgzODA1Igy65NM3Nt9A1fVPThEq3ANbVIVD97TEOGJv6LPaYqyTr%2FsXn3%2B4eoDdLFDCAugFH86iMd5GMV89zT5BWUIKafbXwUPqq1WTZthwkTxMaFgQFhIkb2bRBP3dtYUAzmJN4al7jD6rjtxcU%2Fddmux7DHSelshNZgpIgtS69c%2FxwoGXeCpkbMXbi8Dz3Nhthqhbu8TWtfg1%2F8lzYuPa5Cxy3ZI6K7VxxksIiHOG8YCaeI%2FwjgxDH7dKl1vfYm%2BNPMTahB5m1laXrswnl8sJ5%2BrhnxJsy%2BWt8cTBIsI8Ui7Ku1zbG6m2hnwDYvK14cJ7Ue7MEgSDXWiY371hsIYP9Hw6nxUBvfuIKFQaDgbcFy%2FqRYj%2Fn4ktDRw3y4B3iIjcbthIW9IwUL64%2BZnL9lJ4Ghi6QVAyWsePLFttPtJl3lA1giyw9Cy1oe93iF1PkICMJSfYSRKg2ieSy4GFz9GpxodDD%2FlItY%2FHD6YH99NqSoXGB11NdxqpjOa7lZC1hHEAP%2BDX6c2QXnlqPLVnUdGqsOhonMqXHnriimF6JyOM%2FAuToCofYnIdLPlvVWU3AYQESp%2Bhsbmom6cFU0CF5QKTupNSYSodMSzs3fhU86PbnUwyusojfoQSydDrzkUjx%2Fj8fGlh0xBcL9yo2B8RSyGkmzDxr8u9BjqkAVwybsMu81twaNMvHIvbwlZBmvIQDBVyCy4Etoy6Ij3YGWyC5aoJVUFPA8fn7vws2QKxbqkXjmpx%2BdOeNlqu8jndPfwOD8KriSWiOoDkwBqPzJtSMi%2B%2FHBpdRP%2B2KHS%2BZKGu5wBVGJ8tqFdzSVsZjGP2XhcVp4Q4rQPLDl17LETy4VpIWNWyp5nJJ5FL8HhxXUDwdBcItkIqKDILo92fT9CyxfRr&X-Amz-Signature=5ac5e4b4c41cae60224598aec42c8867973598e99dd03305266a1dadc75d3033&X-Amz-SignedHeaders=host&x-id=GetObject)",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-813c-92ce-cb296bef0fce",
        "parent": "###  実行される流れ",
        "children": []
      },
      {
        "type": "numbered_list_item",
        "blockId": "19d2297f-7a72-8173-a793-c7c8003a68cf",
        "parent": "1. 最初に `create_migrations_table()` を実行して `migrations` テーブルを作成します。（既に作成済みの場合は何も処理しません）",
        "children": []
      },
      {
        "type": "numbered_list_item",
        "blockId": "19d2297f-7a72-81e6-9f95-f1e2aa4a3b09",
        "parent": "2. 次に、まだ適用されていないマイグレーションが順番に実行されます。",
        "children": []
      },
      {
        "type": "numbered_list_item",
        "blockId": "19d2297f-7a72-816b-8ffe-e03e4ea5758e",
        "parent": "3. 最後に、`migrations` テーブルにその履歴が保存されます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8169-82b0-e63a02e12b53",
        "parent": "これで、マイグレーションできる仕組みが完成しました。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81ee-9b0e-e2e3e62faf9e",
        "parent": "これを使えば、スキーマを変更するマイグレーションファイルを追加して`apply_migrations.py`を実行すると、いつでもデータベースのスキーマを変更できます。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81cb-9692-db27ad00f1f8",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "paragraph",
    "blockId": "19d2297f-7a72-8046-aab9-f7dcb64541cd",
    "parent": "**チートシート**",
    "children": []
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-81f3-9beb-ccabfee01d8d",
    "parent": "## カラムの属性",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-810c-9634-e764f3620a50",
        "parent": "ここではSQLで使える主なカラムの属性について列挙します。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c7-b68a-c068f2feef6c",
        "parent": "テーブルを作成する際に参考にしてください。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-816b-808e-e6a9e8a5783a",
        "parent": "## データ型",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81d8-b476-ecb963e682c8",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-811a-963e-fdb17c7d2789",
        "parent": "**整数型**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81f8-ab97-ce45445c338f",
        "parent": "- `INTEGER`: 整数を保存します。通常、範囲は -2,147,483,648 ～ 2,147,483,647。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-810b-8257-d2fb6715b347",
        "parent": "- `SMALLINT`: `INTEGER` より小さな範囲の整数（-32,768 ～ 32,767）。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81d1-8110-f9cb18db9254",
        "parent": "**浮動小数点型**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81f1-9660-f2450c66edee",
        "parent": "- `FLOAT`: 浮動小数点数を保存します。精度はデータベースごとに異なります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8120-a1e7-dddf9ea3d8d0",
        "parent": "**文字列型**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81c7-9e3c-c907927c8d70",
        "parent": "- `TEXT` : 文字列型",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-817b-8cbf-c9326c26b860",
        "parent": "- `CHAR(n)`: 固定長文字列。`n` で文字数を指定します。文字数が不足している場合、スペースで埋められます。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8149-a305-cfdb3e28103f",
        "parent": "- `VARCHAR(n)`: 可変長文字列。`n` で最大文字数を指定します。文字数が不足してもスペースで埋めません。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81a8-b37e-ec691aecdbc8",
        "parent": "**日付と時刻**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-814f-9e42-f0a864d71335",
        "parent": "- `DATE`: 日付を保存します（`YYYY-MM-DD` 形式）。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8127-8baf-ffe562b6cd5d",
        "parent": "- `TIME`: 時間を保存します（`HH:MM:SS` 形式）。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81df-aaf5-e616ce11a40e",
        "parent": "- `DATETIME`: 日付と時間を合わせて保存します（`YYYY-MM-DD HH:MM:SS` 形式）。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81b8-bf94-c650c2651371",
        "parent": "- `TIMESTAMP`: 日付と時間を保存し、通常は自動的に現在時刻に更新するオプションもあります。",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c5-a686-fb00e3ec1ea9",
        "parent": "**真偽型**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8135-bc8b-ca6197316459",
        "parent": "- `BOOLEAN`：真偽型。`0`または`1`として保存されるため、実際には`INTEGER`型として動作する。そのため注意が必要。",
        "children": []
      },
      {
        "type": "heading_2",
        "blockId": "19d2297f-7a72-8152-b2b3-c8066c4dcaef",
        "parent": "## 制約",
        "children": []
      },
      {
        "type": "divider",
        "blockId": "19d2297f-7a72-81e3-ba51-fff5f6062625",
        "parent": "---",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81c4-ba64-f684697ef004",
        "parent": "**PRIMARY KEY**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81bf-b631-c6dd9c1ecce9",
        "parent": "- テーブル内で各行を一意に識別するカラムに設定します。`PRIMARY KEY` に指定されたカラムは重複を許さず、`NULL` 値も許可しません。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81c8-a028-d0f3ca56b9e7",
        "parent": "- 例: `id INTEGER PRIMARY KEY`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b2-a829-cf6bcdad69ce",
        "parent": "**AUTOINCREMENT**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81e6-8fcf-f323365e030b",
        "parent": "- 主に `PRIMARY KEY` カラムに使用され、自動的に一意の連番を生成します。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8138-a97e-ec3ee45a12c3",
        "parent": "- 例: `id INTEGER PRIMARY KEY AUTO_INCREMENT`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8124-903b-ff629bb76c5b",
        "parent": "**UNIQUE**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81c6-88e1-f5b4f06d32ea",
        "parent": "- 特定のカラムが一意であることを保証します。同じテーブル内で重複する値が入ることを防ぎます。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81e7-8792-fa4c37717223",
        "parent": "- 例: `email VARCHAR(100) UNIQUE`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81e3-a33c-f7653086eae1",
        "parent": "**NOT NULL**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81b8-bb55-da970d8eecfc",
        "parent": "- `NULL` 値を禁止し、必ずデータを入力しなければならないように設定します。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8191-9255-edad1bdfd203",
        "parent": "- 例: `name VARCHAR(50) NOT NULL`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8173-b878-f1052452bec2",
        "parent": "**CHECK**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-812c-8fcb-d4094709b5b3",
        "parent": "- カラムに入力されるデータが特定の条件を満たすかどうかをチェックします。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8175-b735-cec270e5a004",
        "parent": "- 例: `age INTEGER CHECK (age >= 18)`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8133-b85a-dd7cdf5a4308",
        "parent": "**DEFAULT**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-811b-a053-db4681c7fb07",
        "parent": "- カラムにデータが指定されなかった場合に、デフォルト値を自動的に設定します。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-81b6-8733-e747f253cb8b",
        "parent": "- 例：`created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8183-b1cd-d8634f6f3f86",
        "parent": "**FOREIGN KEY**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8138-8156-d80e44b6ed2d",
        "parent": "- 他のテーブルの `PRIMARY KEY` と関連付けをすることで、リレーション（外部キー制約）を作成します。参照整合性を保つために使われます。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8162-a024-d25c9aaef222",
        "parent": "- 例: `user_id INT, FOREIGN KEY (user_id) REFERENCES users(id)`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81b0-9bf7-e5a0ec44b6c8",
        "parent": "**ON DELETE CASCADE / ON UPDATE CASCADE**",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-816d-a93e-efc41e4c7bce",
        "parent": "- 外部キーに設定し、参照元のデータが削除または更新された際に、連動して子テーブルのデータも削除または更新するようにします。",
        "children": []
      },
      {
        "type": "bulleted_list_item",
        "blockId": "19d2297f-7a72-8117-81c8-d64fcdc5cb3f",
        "parent": "- 例: `FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE`",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-81eb-851f-f1269ee12b57",
        "parent": "",
        "children": []
      }
    ]
  },
  {
    "type": "child_page",
    "blockId": "19d2297f-7a72-812c-9e40-c5b2126f4f3d",
    "parent": "## SQL文",
    "children": [
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-819b-b84b-db2b9b69f023",
        "parent": "ここではSQL文でデータベースを操作する方法を列挙します。",
        "children": []
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-81e2-aea8-ec652ae36cdd",
        "parent": "### テーブル作成",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81c3-9bf0-d68c260ffdf7",
        "parent": "> テーブル作成  \n> ```sql  \n> CREATE TABLE テーブル名(’カラム名 カラムの属性’)  \n> ```  \n>   \n> 例：usersテーブルの作成  \n>   \n> ```sql  \n> CREATE TABLE users(’id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, email VARCHAR(100) UNIQUE’)  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8159-af75-e273bc7bef56",
            "parent": "```sql\nCREATE TABLE テーブル名(’カラム名 カラムの属性’)\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81f1-9159-eb0a9834bff2",
            "parent": "例：usersテーブルの作成",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8177-9856-e2d54d5e1463",
            "parent": "```sql\nCREATE TABLE users(’id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, email VARCHAR(100) UNIQUE’)\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-814e-b312-f952cf5fd2dd",
        "parent": "### データ保存",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8176-aa5e-c893c4f343bd",
        "parent": "> データ保存  \n> ```sql  \n> INSERT INTO テーブル名(カラム名) VALUES (保存する値)  \n> ```  \n>   \n> 例：usersテーブルにデータを保存  \n>   \n> ```sql  \n> INSERT INTO users(name, email) VALUES (\"Sato\", \"hogehoge@gmail.com\")  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81f4-9ea4-ff7acdf612aa",
            "parent": "```sql\nINSERT INTO テーブル名(カラム名) VALUES (保存する値)\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81a1-9a84-d6244f218a2e",
            "parent": "例：usersテーブルにデータを保存",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81f1-9824-d33ed83d1f2f",
            "parent": "```sql\nINSERT INTO users(name, email) VALUES (\"Sato\", \"hogehoge@gmail.com\")\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-8102-ad06-ce9cba839c45",
        "parent": "### データ取得",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81ca-b72c-ff3c91648eb1",
        "parent": "> カラム名を指定する  \n> ```sql  \n> SELECT カラム名 FROM テーブル名  \n> ```  \n>   \n> 例：usersテーブルのカラムnameのデータを取得する  \n>   \n> ```sql  \n> SELECT name FROM users  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-818e-b5b5-f3aa418c26af",
            "parent": "```sql\nSELECT カラム名 FROM テーブル名\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8149-8935-f0789f9f55de",
            "parent": "例：usersテーブルのカラムnameのデータを取得する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8122-b1aa-c6f0499fb51b",
            "parent": "```sql\nSELECT name FROM users\n```",
            "children": []
          }
        ]
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81a1-9183-cb5459030bd8",
        "parent": "> テーブル内のすべてのデータを取得する  \n> ```sql  \n> SELECT * FROM テーブル名  \n> ```  \n>   \n> 例：usersテーブルのすべてのデータを取得する  \n>   \n> ```sql  \n> SELECT * FROM users  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8186-a168-eae245a8101a",
            "parent": "```sql\nSELECT * FROM テーブル名\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8144-98e7-e9164e09c783",
            "parent": "例：usersテーブルのすべてのデータを取得する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81b7-b5e2-fa49b06c6423",
            "parent": "```sql\nSELECT * FROM users\n```",
            "children": []
          }
        ]
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8127-9c6d-fdbf664bdf72",
        "parent": "> どの行のデータを取得するか指定する  \n> ```sql  \n> SELECT カラム名 FROM テーブル名 WHERE 条件  \n> ```  \n>   \n> 例：usersテーブルの中のid=1の行のすべてのカラムのデータを取得する  \n>   \n> ```sql  \n> SELECT * FROM users WHERE id = 1  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8191-94bd-f9f45988d0ce",
            "parent": "```sql\nSELECT カラム名 FROM テーブル名 WHERE 条件\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81f5-b3e0-de466b23607a",
            "parent": "例：usersテーブルの中のid=1の行のすべてのカラムのデータを取得する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8156-a268-ffff1f7c4f91",
            "parent": "```sql\nSELECT * FROM users WHERE id = 1\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-81f7-a24e-ecc05a438a0b",
        "parent": "### データ編集",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-810c-8cca-c5814947da71",
        "parent": "> データ編集  \n> ```sql  \n> UPDATE テーブル名 SET カラム名 = 値 WHERE 条件  \n> ```  \n>   \n> 例：usersテーブルの中のid=1の行のデータのnameの値を編集する  \n>   \n> ```sql  \n> UPDATE users SET name = \"Fujiwara\" WHERE id = 1  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81d6-bdcc-d9a0cd4296fb",
            "parent": "```sql\nUPDATE テーブル名 SET カラム名 = 値 WHERE 条件\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81e0-a31b-d8449e97d84f",
            "parent": "例：usersテーブルの中のid=1の行のデータのnameの値を編集する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8103-a371-e58a29d92212",
            "parent": "```sql\nUPDATE users SET name = \"Fujiwara\" WHERE id = 1\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-8185-b791-e52abdab07cf",
        "parent": "### データ削除",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8163-aae5-fd9af5158dc8",
        "parent": "> データ削除  \n> ```sql  \n> DELETE FROM テーブル名 WHERE 条件  \n> ```  \n>   \n> 例：usersテーブルの中のid=1の行のデータを削除する  \n>   \n> ```sql  \n> DELETE FROM users SET WHERE id = 1  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-819a-9314-d01716b88ff9",
            "parent": "```sql\nDELETE FROM テーブル名 WHERE 条件\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8106-a126-d87ae4a19474",
            "parent": "例：usersテーブルの中のid=1の行のデータを削除する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8140-9375-c9ba9323ea46",
            "parent": "```sql\nDELETE FROM users SET WHERE id = 1\n```",
            "children": []
          }
        ]
      },
      {
        "type": "heading_3",
        "blockId": "19d2297f-7a72-81b2-a1f0-cebbad7e86b2",
        "parent": "### テーブルの編集",
        "children": []
      },
      {
        "type": "paragraph",
        "blockId": "19d2297f-7a72-8184-b741-ff5edbc98461",
        "parent": "既存のテーブルのカラムを編集するには`ALTER TABLE`文を使います。",
        "children": []
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-81f6-b8e5-d8d04d77dce7",
        "parent": "> カラム名の変更  \n> ```sql  \n> ALTER TABLE テーブル名 RENAME COLUMN 古いカラム名 TO 新しいカラム名  \n> ```  \n>   \n> 例：usersテーブルのカラムnameをfull_nameに変更する  \n>   \n> ```sql  \n> ALTER TABLE users RENAME COLUMN name TO full_name  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8137-89ac-ed3b5c8884ec",
            "parent": "```sql\nALTER TABLE テーブル名 RENAME COLUMN 古いカラム名 TO 新しいカラム名\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-81aa-91e4-dcc02a4d24ce",
            "parent": "例：usersテーブルのカラムnameをfull_nameに変更する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8194-88e6-f4d9466b24b6",
            "parent": "```sql\nALTER TABLE users RENAME COLUMN name TO full_name\n```",
            "children": []
          }
        ]
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8136-802e-ddb0414a6b36",
        "parent": "> カラムの追加  \n> ```sql  \n> ALTER TABLE テーブル名 ADD 新しいカラム名 データ型  \n> ```  \n>   \n> 例：usersテーブルのカラムpasswordを追加する  \n>   \n> ```sql  \n> ALTER TABLE users ADD password VARCHAR(100)  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-813c-a6ef-d6e7947f9f7f",
            "parent": "```sql\nALTER TABLE テーブル名 ADD 新しいカラム名 データ型\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-813c-9c49-c66605e232bc",
            "parent": "例：usersテーブルのカラムpasswordを追加する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-8163-84d2-e1bf2a3005e8",
            "parent": "```sql\nALTER TABLE users ADD password VARCHAR(100)\n```",
            "children": []
          }
        ]
      },
      {
        "type": "callout",
        "blockId": "19d2297f-7a72-8136-851c-c020c9df1ac3",
        "parent": "> カラムの削除  \n> ```sql  \n> ALTER TABLE テーブル名 DROP COLUMN カラム名;  \n> ```  \n>   \n> 例：usersテーブルのカラムpasswordを削除する  \n>   \n> ```sql  \n> ALTER TABLE users DROP COLUMN password;  \n> ```",
        "children": [
          {
            "type": "code",
            "blockId": "19d2297f-7a72-81db-aa3f-de0737ab41ad",
            "parent": "```sql\nALTER TABLE テーブル名 DROP COLUMN カラム名;\n```",
            "children": []
          },
          {
            "type": "paragraph",
            "blockId": "19d2297f-7a72-8136-ba4b-f1d250fc925a",
            "parent": "例：usersテーブルのカラムpasswordを削除する",
            "children": []
          },
          {
            "type": "code",
            "blockId": "19d2297f-7a72-810a-b616-ff4635aba23f",
            "parent": "```sql\nALTER TABLE users DROP COLUMN password;\n```",
            "children": []
          }
        ]
      }
    ]
  }
]